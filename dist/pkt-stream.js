var Sn=Object.create;var g=Object.defineProperty;var In=Object.getOwnPropertyDescriptor;var Nn=Object.getOwnPropertyNames;var _n=Object.getPrototypeOf,Dn=Object.prototype.hasOwnProperty;var vn=(e,t)=>{for(var o in t)g(e,o,{get:t[o],enumerable:!0})},zo=(e,t,o,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of Nn(t))!Dn.call(e,a)&&a!==o&&g(e,a,{get:()=>t[a],enumerable:!(r=In(t,a))||r.enumerable});return e};var En=(e,t,o)=>(o=e!=null?Sn(_n(e)):{},zo(t||!e||!e.__esModule?g(o,"default",{value:e,enumerable:!0}):o,e)),Rn=e=>zo(g({},"__esModule",{value:!0}),e);var ir={};vn(ir,{PKT:()=>R,PKTStream:()=>qo});module.exports=Rn(ir);var gn=require("tiny-typed-emitter");var n=class{b;o;constructor(t){this.b=t,this.o=0}skip(t=0){this.o+=t}bool(){return this.u8()===1}u8(){return this.b.readUint8(this.o++)}i8(){return this.b.readInt8(this.o++)}u16(){let t=this.b.readUint16LE(this.o);return this.o+=2,t}i16(){let t=this.b.readInt16LE(this.o);return this.o+=2,t}u32(){let t=this.b.readUint32LE(this.o);return this.o+=4,t}i32(){let t=this.b.readInt32LE(this.o);return this.o+=4,t}f32(){let t=this.b.readFloatLE(this.o);return this.o+=4,t}u64(){let t=this.b.readBigUint64LE(this.o);return this.o+=8,t}i64(){let t=this.b.readBigInt64LE(this.o);return this.o+=8,t}string(t){let o=this.u16();if(o<=t){o=o*2;let r=this.b.toString("utf16le",this.o,this.o+o);return this.o+=o,r}return""}bytes(t=0,o,r){if(o&&t>o)return Buffer.alloc(0);r&&(t=t*r);let a=Buffer.from(this.b.subarray(this.o,this.o+t));return this.o+=t,a}array(t,o,r){return r&&t>r?[]:new Array(t).fill(void 0).map(o)}};function B(e){let t=new n(e),o={};return t.skip(6),o.cooldown2=t.f32(),t.skip(1),o.cooldown1=t.f32(),o.skillId=t.u32(),o}var A="PKTSkillCooldownNotify",L=43413;function k(e){let t={};return t.level=e.u8(),t.points=e.u16(),t.id=e.u32(),t}function C(e){let t=new n(e),o={};return o.abilityDataList=t.array(t.u16(),()=>k(t),100),o}var M="PKTAbilityChangeNotify",F=32675;function Vo(e){let t={};return t.featureType=e.u16(),t.level=e.u32(),t}function j(e){let t=new n(e),o={};return o.objectId=t.u64(),o.activeAbilityList=t.array(t.u16(),()=>Vo(t),60),o}var U="PKTActiveAbilityNotify",O=1154;function q(e){let t=new n(e),o={};return o.addonFeatureIdList=t.bytes(t.u16(),200,4),o.objectId=t.u64(),o.addonSkillFeatureList=t.array(t.u16(),()=>{let r={};return r.skillId=t.u32(),r.addonSkillFeatureIdList=t.array(t.u16(),()=>t.u32(),5),r},200),o}var z="PKTAddonSkillFeatureChangeNotify",V=11929;function Z(e){let t=new n(e),o={};return o.packetResultCode=t.u32(),o.unk1_m=t.bytes(t.u32(),688),o}var H="PKTAuthTokenResult",G=34403;function W(e){let t=new n(e),o={};return t.skip(1),o.paralyzationMaxPoint=t.u32(),t.skip(2),o.type=t.u8(),o.paralyzationPoint=t.u32(),o.objectId=t.u64(),o}var Y="PKTBlockSkillStateNotify",$=45172;function J(e){let t=new n(e),o={};return o.targetId=t.u64(),t.skip(1),o.type=t.u32(),t.skip(2),o.sourceId=t.u64(),o}var Q="PKTCounterAttackNotify",X=32191;function tt(e){let t=new n(e),o={};return t.bool()&&(o.deathType=t.u8()),o.durabilityDecrement=t.u8(),o.targetId=t.u64(),o.effectId=t.u32(),t.bool()&&(o.damageAttr=t.u8()),o.unk2_m=t.u32(),t.bool()&&(o.abnormalStatusType=t.u8()),o.sourceId=t.u64(),o.directionYaw=t.u16(),o.unk0_m=t.u64(),o}var et="PKTDeathNotify",ot=17693;var Bn=[0,31,28,31,30,31,30,31,31,30,31,30,31];function An(e){return!(e%4||!(e%100)&&e%400)}function Ln(e,t,o){if(e>99){if(e<1752||e==1752&&(t<9||t==9&&o<<14))return!1}else e+=1900;return o>0&&t<=12&&(o<=Bn[t]||o==29&&t==2&&An(e))}function Zo(e){let t=Number(e&0xffffffffn),o=Number(e>>32n&0xffffffffn),r=t&4095,a=(t&65535)>>12,c=t>>16&31;Ln(r,a,c)||(r=a=c=0);let l=t>>21&31,P=t>>26&63,x=o&63,h=o>>6&16383;return l<24&&P<60&&x<60&&h<1e3||(l=24,P=x=h=0),new Date(Date.UTC(r<=99?r+1900:r,a-1,c,l,P,x,h))}function p(e,t=0){let o=e.u16();return(o&4095)<2079?(e.o-=2,Zo(e.i64())):Zo(BigInt(o)&0xfffn|0x11000n)}function d(e){let t={};return t.id=e.u32(),t.level=e.u16(),t.unk2=e.u8(),t.itemTint=e.bytes(e.u16(),5,14),t.slot=e.u16(),e.bool()&&(t.unk6_0=e.u8()),t.expireTime=p(e),t}function nt(e){let t=new n(e),o={};return o.objectId=t.u64(),o.equipItemDataList=t.array(t.u16(),()=>d(t),33),o.unk2=t.u32(),o.unk3=t.u32(),o}var rt="PKTEquipChangeNotify",ut=53204;function at(e){let t=new n(e),o={};return o.objectId=t.u64(),o.equipLifeToolDataList=t.array(t.u16(),()=>d(t),9),o}var it="PKTEquipLifeToolChangeNotify",st=51254;function ft(e){let t=new n(e),o={};return o.stance=t.u8(),t.skip(1),o.objectId=t.u64(),t.skip(2),o}var mt="PKTIdentityStanceChangeNotify",ct=17838;function pt(e){let t=new n(e),o={};return o.abilityDataList=t.array(t.u16(),()=>k(t),100),o.struct_137=t.bytes(t.u16(),353,48),o}var dt="PKTInitAbility",lt=53450;function bt(e){let t=new n(e),o={};return o.unk0=t.u32(),o.unk1=t.u8(),o.unk2=t.u32(),o.struct_595=t.string(128),o.playerId=t.u64(),o.unk5=t.u64(),o.lostArkDateTime=p(t),o.struct_30=t.array(t.u16(),()=>{let r={};return r.struct_578=t.string(32),r.struct_595=t.string(128),r.versionString=t.string(64),r},64),o}var yt="PKTInitEnv",kt=16937;function s(e){let t={};return t.occurTime=p(e),t.totalTime=e.f32(),t.struct_446=e.bytes(e.u16(),8,7),t.stackCount=e.u8(),t.effectInstanceId=e.u32(),e.bool()&&(t.value=e.bytes(16)),t.skillLevel=e.u8(),t.sourceId=e.u64(),t.endTick=e.u64(),e.bool()&&(t.unk11_0=e.u64()),t.statusEffectId=e.u32(),t}function wn(e){if(e.length===0)return 0n;if(e.length>8)throw new Error("Value is too large");let t=Buffer.alloc(8);return e.copy(t),t.readBigInt64LE()}function u(e,t=0){let o=e.u8(),r=e.bytes(o>>1&7),a=wn(r)<<4n|BigInt(o>>4);return o&1?-a:a}function T(e){let t={};return t.unk0=e.u8(),t.unk1=e.u8(),t.unk2=u(e),t.unk3=e.u8(),t.unk4=e.u64(),t.unk5=e.u16(),t.unk6=u(e),t}function Pt(e){let t=new n(e),o={};return o.unk0=t.u32(),o.gearLevel=t.f32(),o.unk2=t.u32(),o.unk3=t.u8(),o.unk4=t.u64(),o.struct_341=t.string(7),o.characterId=t.u64(),o.unk7=t.u8(),o.unk8=t.u8(),o.unk9=t.u8(),o.unk10=t.u8(),o.level=t.u16(),o.unk12=t.u16(),o.unk13=t.u8(),o.playerId=t.u64(),o.unk15=t.u32(),o.unk16=t.u32(),o.unk17=t.u16(),o.unk18=t.u8(),t.bool()&&(o.unk20_0=t.u32()),o.unk21=t.bytes(120),o.unk22=t.u8(),o.unk23=t.u32(),o.unk24=t.u8(),o.name=t.string(20),o.unk26=t.u64(),o.unk27=t.u8(),o.struct_105=t.bytes(t.u16(),64),o.unk29=t.bytes(25),o.classId=t.u16(),o.unk31=t.u32(),o.unk32=t.u32(),o.unk33=t.u8(),o.struct_230=t.bytes(t.u16(),3,17),o.unk35=t.u64(),o.unk36=t.u8(),o.statusEffectDatas=t.array(t.u16(),()=>s(t),80),o.unk38=t.u64(),o.unk39=t.u8(),o.unk40=t.u16(),o.unk41=t.u8(),o.periodUpdateStatDataList=t.array(t.u16(),()=>T(t),5),o.unk43=t.u64(),o.unk44=t.u8(),o.unk45=t.u8(),o.unk46=t.u8(),o.unk47=t.u32(),o.unk48=t.u8(),o.unk49=t.u16(),o.unk50=t.u8(),o.unk51=t.u32(),o.struct_345=t.bytes(t.u16(),104,30),o.unk53=t.u32(),o.unk54=t.u8(),o.unk55=t.bytes(35),o.statPair=t.array(t.u16(),()=>{let r={};return r.statType=t.u8(),r.value=u(t),r},153),o.unk57=t.u32(),o}var xt="PKTInitPC",gt=17550;function Ho(e){let t={},o=e.u16();return o===1&&(t.unk1_0=e.bytes(o)),t}function Go(e){let t={};return t.unk0=e.u8(),t.unk1=e.u8(),t.unk2=e.u32(),t.unk3=e.u32(),t.unk4=e.u8(),t.struct_147=Ho(e),t.unk6=e.u8(),t.struct_148=e.bytes(e.u16(),3,9),t}function Wo(e){let t={};return t.unk0=e.u16(),t.unk1=e.u32(),t.unk2=e.u32(),t.unk3=e.u32(),t.unk4=e.u32(),t.struct_241=e.bytes(e.u16(),10,18),t.struct_263=e.bytes(e.u16(),2,9),t.unk7=e.u8(),t.struct_149=e.bytes(e.u16(),10,9),t.struct_397=e.bytes(e.u16(),2,10),t.unk10=e.u64(),t.unk11=e.u32(),t.struct_239=e.array(e.u16(),()=>Go(e),3),t.unk13=e.u32(),t}function Yo(e){let t={};return t.unk0=e.u8(),t.unk1=e.u16(),t.struct_98=e.bytes(e.u32(),51),t.unk3=e.u16(),t.unk4=e.u8(),t.unk5=e.u16(),t.unk6=e.bytes(3),t.unk7=e.u8(),t}function $o(e){let t={};return t.unk0=e.u8(),t.unk1=e.bytes(e.u16(),7),t.unk2=e.bytes(e.u16(),7),e.bool()&&(t.struct_749=Yo(e)),t}function Jo(e){let t={};return t.struct_440=e.bytes(e.u16(),3,10),t.unk1=e.u8(),t.unk2=e.u32(),t.struct_274=e.bytes(e.u16(),3,21),e.bool()&&(t.unk5_0=e.bytes(10)),t.unk6=e.u32(),e.bool()&&(t.struct_790=$o(e)),t.unk9=e.u32(),t.unk10=e.u32(),t.itemTint=e.bytes(e.u16(),5,14),e.bool()&&(t.unk13_0=e.bytes(9)),t.unk14=e.u32(),e.bool()&&(t.unk1_0=e.u32(),t.struct_197=e.bytes(e.u16(),5,30),t.unk1_2=e.u32()),t.struct_237=e.bytes(e.u16(),3,7),e.bool()&&(t.struct_234=e.bytes(e.u16(),2,32)),t.struct_276=e.bytes(e.u16(),10,29),t.unk20=e.u32(),t}function I(e){let t={};return t.npcId=e.u32(),t.isDead=e.bool(),t}function Xo(e){let t={};return t.unk0=e.u8(),t.struct_0=e.array(e.u16(),()=>{let o={};return o.unk1_0_0=e.u32(),o.struct_525=e.bytes(e.u16(),10),o},3),t.bossKillDataList=e.array(e.u16(),()=>I(e),3),t.unk3=e.u8(),t.unk4=e.u32(),t}function tn(e){let t={};return t.unk0=e.u8(),t.struct_23=e.array(e.u16(),()=>{let o={};return o.unk1_0_0=e.u16(),o.unk1_0_1=e.u8(),o.struct_236=e.string(2),o},20),t.struct_237=e.bytes(e.u16(),3,7),t.struct_511=e.bytes(e.u16(),5,7),t.unk4=e.u8(),t.unk5=e.u8(),t}function en(e){let t={},o=e.u8();return o===1&&(t.struct_665=Wo(e)),o===2&&(t.unk2_0=e.u8(),t.struct_1=e.array(e.u16(),()=>{let r={};return r.unk1_0_0=e.u32(),r.unk1_0_1=e.u8(),r.struct_525=e.bytes(e.u16(),10),r.unk1_0_3=e.u8(),r},3),t.struct_133=e.bytes(e.u16(),3,6)),o===3&&(t.unk3_0=e.bytes(26)),o===4&&(t.unk4_0=e.bytes(e.u16(),10,13),t.unk4_1=e.bytes(e.u16(),10,13),t.unk4_2=e.u32()),o===5&&(t.struct_664=Jo(e)),o===6&&(t.struct_610=Xo(e)),o===7&&(t.unk7_0=e.bytes(9)),o===8&&(t.struct_657=tn(e)),o===9&&(t.unk9_0=e.u8()),t}function on(e){let t={};return e.u32()>0&&(t.serialNumber=e.u64(),t.id=e.u32(),t.level=e.u16(),t.slot=e.u16(),t.durability=e.u32(),t.unk1_6_m=e.u32(),t.flag=e.u32(),t.expireTime=p(e),t.lockUpdateTime=p(e),e.bool()&&(t.unk1_10_0=e.bytes(9)),t.unk1_11=e.u8(),t.unk1_12=e.u8(),t.unk1_13=e.u32(),t.struct_565=en(e),t.unk1_15=e.u32()),t}function Kt(e){let t=new n(e),o={};return o.storageType=t.u8(),o.itemDataList=t.array(t.u16(),()=>on(t),80),o}var St="PKTInitItem",It=30984;function nn(e){let t={};return t.unk0=e.u32(),e.bool()&&(t.unk2_0=e.u32()),t.unk3=e.u32(),t.unk4=e.u32(),e.bool()&&(t.unk6_0=e.bytes(9)),t}function Nt(e){let t=new n(e),o={};return o.unk0=t.u8(),o.statusEffectDatas=t.array(t.u16(),()=>s(t),80),o.unk2=t.u8(),o.struct_230=t.bytes(t.u16(),3,17),o.unk4=t.u64(),o.statPair=t.array(t.u16(),()=>{let r={};return r.statType=t.u8(),r.value=u(t),r},153),o.struct_424=t.array(t.u16(),()=>nn(t),300),o.unk7=t.u32(),o.struct_345=t.bytes(t.u16(),104,30),o.unk9=t.u8(),o.struct_137=t.bytes(t.u16(),353,48),o.addonSkillFeatureList=t.array(t.u16(),()=>{let r={};return r.skillId=t.u32(),r.addonSkillFeatureIdList=t.array(t.u16(),()=>t.u32(),5),r},200),o.addonFeatureIdList=t.bytes(t.u16(),200,4),o.unk13=t.u64(),t.bool()&&(o.unk15_0=t.u32()),o.abilityDataList=t.array(t.u16(),()=>k(t),100),o}var _t="PKTInitLocal",Dt=48680;function vt(e){let t=new n(e),o={};return o.account_CharacterId1=t.u64(),o.unk1=t.u32(),o.serverAddr=t.string(256),o.account_CharacterId2=t.u64(),o}var Et="PKTMigrationExecute",Rt=21930;function rn(e){let t={};return t.lookData=e.bytes(e.u32(),512),t.unk1=e.u64(),t.unk2=e.u8(),t.unk3=e.u16(),t.lostArkString=e.string(20),t.unk5=e.u8(),t.unk6=e.u8(),t.equipItemDataList=e.array(e.u16(),()=>d(e),33),t.unk8=e.u64(),t}function m(e,t=0){return e.u16()*(2*Math.PI)/65536}function ht(e){return e>>20===1?-((~e>>>0)+1&2097151):e}function i(e,t=0){let o=e.u64();return{x:ht(Number(o&0x1fffffn)),y:ht(Number(o>>21n&0x1fffffn)),z:ht(Number(o>>42n&0x1fffffn))}}function _(e){let t={};return e.bool()&&(t.unk1_0=e.u16()),t.unk2=e.u8(),t.objectId=e.u64(),t.periodUpdateStatDataList=e.array(e.u16(),()=>T(e),5),e.bool()&&(t.struct_275=e.bytes(e.u16(),12,12)),e.bool()&&(t.unk8_0=e.u8()),t.statusEffectDatas=e.array(e.u16(),()=>s(e),80),t.directionYaw=m(e),e.bool()&&(t.unk12_0=e.u8()),e.bool()&&(t.struct_342=e.bytes(e.u16(),11,9)),t.unk15=e.u8(),e.bool()&&(t.unk17_0=e.u32()),e.bool()&&(t.unk19_0=e.u8()),t.unk20=e.u8(),e.bool()&&(t.unk22_0=e.u64()),e.bool()&&(t.balanceLevel=e.u16()),e.bool()&&(t.unk26_0=e.u32()),e.bool()&&(t.unk28_0=e.u8()),e.bool()&&(t.unk30_0=e.u8()),e.bool()&&(t.struct_733=rn(e)),t.typeId=e.u32(),e.bool()&&(t.unk35_0=e.u8()),e.bool()&&(t.transitIndex=e.u32()),t.statPair=e.array(e.u16(),()=>{let o={};return o.statType=e.u8(),o.value=u(e),o},153),t.position=i(e),t.unk40=e.u8(),t.unk41=e.u8(),t.level=e.u16(),e.bool()&&(t.unk44_0=e.u32()),t.unk45=e.u8(),t.spawnIndex=e.u32(),e.bool()&&(t.unk48_0=e.u8()),e.bool()&&(t.unk50_0=e.u32()),t}function Bt(e){let t=new n(e),o={};return t.bool()&&(o.unk1_0=t.string(20),o.unk1_1=t.string(20)),t.bool()&&(o.unk2_0=t.u64()),o.npcStruct=_(t),t.bool()&&(o.unk5_0=t.u8()),o.unk6=t.u8(),o}var At="PKTNewNpc",Lt=26150;function wt(e){let t=new n(e),o={};return t.skip(21),o.ownerId=t.u64(),t.skip(14),o.npcData=_(t),o.publishReason=t.u8(),o}var Ct="PKTNewNpcSummon",Mt=13454;function an(e){let t={};return t.unk0=e.u32(),e.bool()&&(t.unk2_0=e.bytes(12)),t.unk3=e.u32(),t.unk4=e.bytes(12),t}function sn(e){let t={};return t.name=e.string(20),t.unk4_m=e.u32(),t.identityData=e.bytes(25),t.classId=e.u16(),t.unk4=e.u32(),t.avatarHide=e.u8(),t.unk6=e.u32(),t.guildName=e.string(20),t.periodUpdateStatDataList=e.array(e.u16(),()=>T(e),5),t.unk29_m=e.u8(),t.unk0_m=e.bytes(5),t.maxItemLevel=e.f32(),t.unk7_m=e.u32(),t.avgItemLevel=e.f32(),t.firstHonorTitleId=e.u16(),t.unk17_m=e.u8(),t.unk1_m=e.u8(),t.unk17=e.u8(),t.statPair=e.array(e.u16(),()=>{let o={};return o.statType=e.u8(),o.value=u(e),o},153),t.guildId=e.u64(),t.unk32_m=e.u8(),t.unk5_m=e.u32(),t.addonFeatureIdList=e.bytes(e.u16(),200,4),t.unk23=e.u64(),t.petId=e.u32(),t.playerId=e.u64(),t.equipItemDataList=e.array(e.u16(),()=>d(e),33),t.heading=m(e),t.unk23_m=e.u8(),t.position=i(e),t.unk25_m=e.u8(),t.statusEffectDatas=e.array(e.u16(),()=>s(e),80),t.addonSkillFeatureList=e.array(e.u16(),()=>{let o={};return o.skillId=e.u32(),o.addonSkillFeatureIdList=e.array(e.u16(),()=>e.u32(),5),o},200),t.unk2_m=e.u8(),t.unk34=e.u32(),t.lookData=e.bytes(e.u32(),512),t.unk36=e.u8(),t.equipLifeToolDataList=e.array(e.u16(),()=>d(e),9),t.worldId=e.u8(),t.rvRLevel=e.u16(),t.characterId=e.u64(),t.unk41=e.u8(),t.unk45_m=e.u32(),t.level=e.u16(),t.secondHonorTitleId=e.u16(),e.bool()&&(t.grabbedData=e.bytes(12)),t}function Ft(e){let t=new n(e),o={};return t.bool()&&(o.unk5_0_m=t.bytes(20)),t.bool()&&(o.trackMoveInfo=an(t)),o.unk2_m=t.u8(),o.pcStruct=sn(t),t.bool()&&(o.struct_60=t.array(t.u16(),()=>{let r={};return r.unk1_0_0=t.u64(),r.itemTint=t.bytes(t.u16(),5,14),r.unk1_0_2=t.u32(),r},5)),t.bool()&&(o.unk1_0=t.u32(),o.itemTint=t.bytes(t.u16(),5,14),o.unk1_2=t.u64()),t.bool()&&(o.unk4_0_m=t.bytes(12)),t.bool()&&(o.unk3_0_m=t.u32()),o.unk0_m=t.u8(),o}var jt="PKTNewPC",Ut=21297;function D(e,t=0){return{first:e.u8(),second:e.u8(),third:e.u8()}}function v(e,t=0){return{first:e.u16(),second:e.u16(),third:e.u16()}}function cn(e){let t={};return t.tripodIndex=D(e),t.skillLevel=e.u8(),t.unk2=e.u32(),t.unk3=e.u64(),t.projectileId=e.u64(),t.unk5=e.u16(),t.skillEffect=e.u32(),t.unk7=e.u32(),t.unk8=e.u64(),e.bool()&&(t.struct_342=e.bytes(e.u16(),11,9)),t.ownerId=e.u64(),t.unk12=e.u8(),t.unk13=e.u32(),t.unk14=e.u16(),e.bool()&&(t.unk16_0=e.u64()),t.skillId=e.u32(),e.bool()&&(t.unk19_0=e.u32()),t.unk20=e.u8(),t.chainSkillEffect=e.u32(),t.targetObjectId=e.u64(),t.tripodLevel=v(e),t}function Ot(e){let t=new n(e),o={};return o.projectileInfo=cn(t),o}var qt="PKTNewProjectile",zt=45071;function pn(e){let t={};return t.skillId=e.u32(),t.unk1=e.u8(),t.position=i(e),t.unk3=e.u16(),t.ownerId=e.u64(),t.unk5=e.u8(),t.objectId=e.u64(),t.unk7=e.u8(),t.skillEffect=e.u32(),t.unk9=e.u32(),e.bool()&&(t.struct_342=e.bytes(e.u16(),11,9)),t.unk12=e.u32(),t.unk13=e.u32(),t}function Vt(e){let t=new n(e),o={};return o.unk0=t.u8(),o.trapData=pn(t),o.unk2=t.u8(),o}var Zt="PKTNewTrap",Ht=5934;function Gt(e){let t=new n(e),o={};return o.hitCheckTime=t.u32(),o.paralyzationMaxPoint=t.u32(),o.paralyzationPoint=t.u32(),t.skip(1),o.objectId=t.u64(),o.noHitCheckTime=t.u32(),t.skip(1),o.decreasePoint=t.u32(),o.enable=t.bool(),o}var Wt="PKTParalyzationStateNotify",Yt=8116;function dn(e){let t={};return t.transitIndex=e.u32(),t.unk1=e.u8(),t.unk2=e.u8(),t.unk3=e.u8(),t.zoneInstId=e.u64(),t.zoneId=e.u32(),t.unk6=e.u8(),t.name=e.string(20),t.characterLevel=e.u16(),t.gearLevel=e.f32(),t.partyMemberNumber=e.u8(),t.characterId=e.u64(),t.worldId=e.u8(),t.position=i(e),t.maxHp=u(e),t.curHp=u(e),t.auths=e.u8(),t.unk17=e.u16(),t.classId=e.u16(),t.unk19=e.u8(),t}function $t(e){let t=new n(e),o={};return o.lootGrade=t.u32(),o.raidInstanceId=t.u32(),o.partyInstanceId=t.u32(),o.memberDatas=t.array(t.u16(),()=>dn(t),40),o.partyType=t.u8(),o.partyLootType=t.u8(),o}var Jt="PKTPartyInfo",Qt=36411;function Xt(e){let t=new n(e),o={};return o.partyLeaveType=t.u8(),o.name=t.string(20),o.partyInstanceId=t.u32(),o}var te="PKTPartyLeaveResult",ee=238;function oe(e){let t=new n(e),o={};return o.objectId=t.u64(),o.unk0_m=t.u8(),o.passiveStatusEffectList=t.array(t.u16(),()=>t.u32(),10),o}var ne="PKTPartyPassiveStatusEffectAddNotify",re=25251;function ue(e){let t=new n(e),o={};return o.objectId=t.u64(),o.passiveStatusEffectList=t.array(t.u16(),()=>t.u32(),10),o}var ae="PKTPartyPassiveStatusEffectRemoveNotify",ie=58476;function se(e){let t=new n(e),o={};return o.unk0=t.u8(),o.playerIdOnRefresh=t.u64(),o.unk2=t.u64(),o.characterId=t.u64(),o.statusEffectDatas=t.array(t.u16(),()=>s(t),80),o}var fe="PKTPartyStatusEffectAddNotify",me=27097;function ce(e){let t=new n(e),o={};return o.unk0=t.u64(),o.characterId=t.u64(),o.reason=t.u8(),o.statusEffectIds=t.array(t.u16(),()=>t.u32(),80),o}var pe="PKTPartyStatusEffectRemoveNotify",de=51033;function le(e){let t=new n(e),o={};return t.skip(13),o.raidInstanceId=t.u32(),t.skip(8),o.characterId=t.u64(),t.skip(1),o.partyInstanceId=t.u32(),t.skip(5),o}var be="PKTPartyStatusEffectResultNotify",ye=4215;function ke(e){let t=new n(e),o={};return o.passiveStatusEffectList=t.array(t.u16(),()=>t.u32(),10),o}var Te="PKTPassiveStatusEffectAddNotify",Pe=9409;function xe(e){let t=new n(e),o={};return o.passiveStatusEffectList=t.array(t.u16(),()=>t.u32(),10),o}var ge="PKTPassiveStatusEffectRemoveNotify",Ke=25070;function Se(e){let t=new n(e),o={};return o.initBraveHeartCount=t.u8(),o.startTick=t.u64(),o.endTick=t.u64(),o.braveHeartCount=t.u8(),o.unk1_m=t.bool(),o.unk6_m=t.u64(),o.unk4_m=t.u64(),o.raidResult=t.u8(),o.bossKillDataList=t.array(t.u16(),()=>I(t),3),o.unk11_m=t.bool(),o.unk0_m=t.bool(),o.totalTime=t.u64(),o.unk5_m=t.u64(),o.raidId=t.u32(),o}var Ie="PKTRaidBegin",Ne=46280;function _e(e){let t=new n(e),o={};return o.typeId=t.u32(),t.skip(1),o}var De="PKTRaidBossKillNotify",ve=54487;function Ee(e){let t=new n(e),o={};return o.unk0=t.u8(),o.unk1=t.u8(),o.unk2=t.u64(),o.struct_51=t.array(t.u16(),()=>{let r={};return r.unk1_0_0=u(t),r.unk1_0_1=t.u32(),r.unk1_0_2=u(t),r.struct_531=t.bytes(t.u16(),3),r},3),o.raidResult=t.u8(),o.unk5=t.u64(),o.unk6=t.u64(),o.unk7=t.u64(),o}var Re="PKTRaidResult",he=50274;function ln(e){let t={};return t.objectId=e.u64(),t.unpublishReason=e.u8(),t}function Be(e){let t=new n(e),o={};return o.unpublishedObjects=t.array(t.u16(),()=>ln(t),200),o}var Ae="PKTRemoveObject",Le=32288;function we(e){let t=new n(e),o={};return o.caster=t.u64(),t.skip(1),o.newPosition=i(t),o.newDirectionYaw=m(t),o.skillId=t.u32(),t.skip(2),o.cancelReason=t.u8(),o}var Ce="PKTSkillCancelNotify",Me=57929;function Fe(e){let t=new n(e),o={};return o.caster=t.u64(),o.skillId=t.u32(),t.skip(1),o.skillLevel=t.u8(),t.skip(1),o}var je="PKTSkillCastNotify",Ue=48101;function bn(e,t=0){let o={},r=e.u8();return r&1&&(o.moveTime=e.u32()),r&2&&(o.standUpTime=e.u32()),r&4&&(o.downTime=e.u32()),r&8&&(o.freezeTime=e.u32()),r&16&&(o.moveHeight=e.u32()),r&32&&(o.farmostDist=e.u32()),r&64&&(o.flag40=e.bytes(e.u16(),6)),o}function E(e){let t={};return t.maxHp=u(e),t.damageType=e.u8(),t.damage=u(e),t.unk3_m=e.u16(),t.curHp=u(e),t.targetId=e.u64(),t.modifier=e.u8(),e.bool()&&(t.damageAttr=e.u8()),t}function kn(e){let t={};return t.unk8_m=e.u16(),t.unk2_m=e.u64(),t.unk3_m=e.u16(),t.unk1_m=e.u8(),t.unk4_m=e.u16(),t.skillMoveOptionData=bn(e),t.position=i(e),t.skillDamageEvent=E(e),t.destination=i(e),t}function Oe(e){let t=new n(e),o={};return o.skillEffectId=t.u32(),o.unk2_m=t.u32(),o.skillId=t.u32(),o.skillDamageAbnormalMoveEvents=t.array(t.u16(),()=>kn(t),50),o.sourceId=t.u64(),o.unk1_m=t.u8(),o}var qe="PKTSkillDamageAbnormalMoveNotify",ze=2222;function Ve(e){let t=new n(e),o={};return o.skillId=t.u32(),o.skillDamageEvents=t.array(t.u16(),()=>E(t),50),t.bool()&&(o.unk3_0=t.u32()),o.sourceId=t.u64(),t.bool()&&(o.skillEffectId=t.u32()),o.skillLevel=t.u8(),o}var Ze="PKTSkillDamageNotify",He=15734;function Ge(e){let t=new n(e),o={};return t.skip(4),o.skillId=t.u32(),t.skip(12),o.stage=t.u8(),t.skip(17),o.sourceId=t.u64(),t.skip(8),o}var We="PKTSkillStageNotify",Ye=43936;function Tn(e,t=0){let o={},r=e.u8();return r&1&&(o.layerIndex=e.u8()),r&2&&(o.startStageIndex=e.u8()),r&4&&(o.transitIndex=e.u32()),r&8&&(o.stageStartTime=e.u32()),r&16&&(o.farmostDistance=e.u32()),r&32&&(o.tripodIndex=D(e)),r&64&&(o.tripodLevel=v(e)),o}function $e(e){let t=new n(e),o={};return o.sourceId=t.u64(),o.skillId=t.u32(),o.aimTargetPosition=i(t),t.bool()&&(o.unk1_m=t.u32()),o.newDirectionYaw=m(t),t.bool()&&(o.aiStateId=t.u32()),o.newPosition=i(t),o.curPosition=i(t),t.bool()&&(o.pitchRotation=m(t)),o.skillLevel=t.u8(),o.curDirectionYaw=m(t),o.skillOptionData=Tn(t),o}var Je="PKTSkillStartNotify",Qe=22915;function Xe(e){let t=new n(e),o={};return t.bool()&&(o.unk1_0=t.u32()),o.objectId=t.u64(),o.unk3=t.array(t.u16(),()=>{let r={};return r.statType=t.u8(),r.value=u(t),r},153),o.unk4=t.array(t.u16(),()=>{let r={};return r.statType=t.u8(),r.value=u(t),r},153),o.unk5=t.u8(),o}var to="PKTStatChangeOriginNotify",eo=55718;function oo(e){let t=new n(e),o={};return o.objectId=t.u64(),o.new=t.bool(),t.bool()&&(o.unk3_0=t.u64()),o.statusEffectData=s(t),o.unk5=t.u64(),o}var no="PKTStatusEffectAddNotify",ro=2816;function uo(e){let t=new n(e),o={};return o.reason=t.u8(),o.statusEffectIds=t.array(t.u16(),()=>t.u32(),80),o.objectId=t.u64(),o}var ao="PKTStatusEffectRemoveNotify",io=35019;function so(e){let t=new n(e),o={};return t.skip(3),o.targetId=t.u64(),o.expirationTick=t.u64(),o.effectInstanceId=t.u32(),o}var fo="PKTStatusEffectDurationNotify",mo=13129;function co(e){let t=new n(e),o={};return o.objectId=t.u64(),o.characterId=t.u64(),t.skip(2),o.value=t.u32(),t.skip(4),o.effectInstanceId=t.u32(),t.skip(1),o}var po="PKTStatusEffectSyncDataNotify",lo=21211;function bo(e){let t=new n(e),o={};return t.skip(1),o.step=t.u32(),o.triggerId=t.u32(),o.unk2_m=t.bool(),o}var yo="PKTTriggerBossBattleStatus",ko=56184;function To(e){let t=new n(e),o={};return o.involvedPCs=t.array(t.u16(),()=>t.u64(),40),o.triggerId=t.u32(),o.packetResultCode=t.u32(),o.unk0_m=t.u32(),o}var Po="PKTTriggerFinishNotify",xo=57434;function go(e){let t=new n(e),o={};return o.sourceId=t.u64(),o.involvedPCs=t.array(t.u16(),()=>t.u64(),40),o.triggerSignalType=t.u32(),o.triggerId=t.u32(),o}var Ko="PKTTriggerStartNotify",So=59991;function Io(e){let t=new n(e),o={};return o.position=t.u64(),o.maxHp=u(t),o.curHp=u(t),o.statusEffectDatas=t.array(t.u16(),()=>s(t),80),o.characterId=t.u64(),o.unk0_m=t.u32(),o}var No="PKTTroopMemberUpdateMinNotify",_o=52233;function Do(e){let t=new n(e),o={};return t.skip(1),o.playerId=t.u64(),t.skip(1),o.identityGauge1=t.u32(),o.identityGauge2=t.u32(),o.identityGauge3=t.u32(),t.skip(1),o}var vo="PKTIdentityGaugeChangeNotify",Eo=51434;function Ro(e){let t=new n(e),o={};return o.totalMembers=t.array(t.u16(),()=>t.u64(),40),o.firstPCEnterTick=t.u64(),o.zoneId=t.u32(),o.zoneInstId=t.u64(),o.completeMembers=t.array(t.u16(),()=>t.u64(),40),o.loadComplete=t.bool(),o.zoneLevel=t.u8(),o}var ho="PKTZoneMemberLoadStatusNotify",Bo=58728;function Ao(e){let t=new n(e),o={};return t.skip(1),o.objectId=t.u64(),o}var Lo="PKTZoneObjectUnpublishNotify",wo=37585;function Pn(e){let t={};return t.target=e.u8(),t.instanceId=e.u32(),e.skip(4),t.id=e.u32(),t.stackCount=e.u8(),t}function Co(e){let t=new n(e),o={};return o.zoneStatusEffectDataList=t.array(t.u16(),()=>Pn(t),4),o}var Mo="PKTZoneStatusEffectAddNotify",Fo=52575;function jo(e){let t=new n(e),o={};return t.skip(2),o.statusEffectId=t.u32(),o}var Uo="PKTZoneStatusEffectRemoveNotify",Oo=2142;var xn=new Map([[L,[A,B]],[F,[M,C]],[O,[U,j]],[V,[z,q]],[G,[H,Z]],[$,[Y,W]],[X,[Q,J]],[ot,[et,tt]],[ut,[rt,nt]],[st,[it,at]],[ct,[mt,ft]],[lt,[dt,pt]],[kt,[yt,bt]],[gt,[xt,Pt]],[It,[St,Kt]],[Dt,[_t,Nt]],[Rt,[Et,vt]],[Lt,[At,Bt]],[Mt,[Ct,wt]],[Ut,[jt,Ft]],[zt,[qt,Ot]],[Ht,[Zt,Vt]],[Yt,[Wt,Gt]],[Qt,[Jt,$t]],[ee,[te,Xt]],[re,[ne,oe]],[ie,[ae,ue]],[me,[fe,se]],[de,[pe,ce]],[ye,[be,le]],[Pe,[Te,ke]],[Ke,[ge,xe]],[Ne,[Ie,Se]],[ve,[De,_e]],[he,[Re,Ee]],[Le,[Ae,Be]],[Me,[Ce,we]],[Ue,[je,Fe]],[ze,[qe,Oe]],[He,[Ze,Ve]],[Ye,[We,Ge]],[Qe,[Je,$e]],[eo,[to,Xe]],[ro,[no,oo]],[io,[ao,uo]],[mo,[fo,so]],[lo,[po,co]],[ko,[yo,bo]],[xo,[Po,To]],[So,[Ko,go]],[_o,[No,Io]],[Eo,[vo,Do]],[Bo,[ho,Ro]],[wo,[Lo,Ao]],[Fo,[Mo,Co]],[Oo,[Uo,jo]]]);var Kn=En(require("fs")),qo=class extends gn.TypedEmitter{#t;ignored=JSON.parse(Kn.default.readFileSync("ignored.json").toString());constructor(t){super(),this.#t=t}read(t){try{if(t.length<8)return!1;let o=t.readUInt8(7);if(o>2)return!1;let r=t.readUInt8(6);if(r>3)return!1;let a=t.subarray(8),c=t.readUInt16LE(4),l=xn.get(c);if(l){let[P,x]=l;this.emit(P,new R(Buffer.from(a),c,r,!!o,this.#t,x))}this.emit("*",a,c,r,!!o)}catch(o){return console.log(o),!1}}},R=class{#t;#o;#n;#r;#u;#a;constructor(t,o,r,a,c,l){this.#t=t,this.#o=o,this.#n=r,this.#r=a,this.#u=c,this.#a=l}#e;get parsed(){if(!this.#e)try{this.#e=this.#a(this.#u.decrypt(this.#t,this.#o,this.#n,this.#r))}catch(t){console.error(`[meter-core/pkt-stream] - ${t}`);return}return this.#e}};0&&(module.exports={PKT,PKTStream});
