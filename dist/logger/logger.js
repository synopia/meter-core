var so=Object.defineProperty;var Ot=Object.getOwnPropertyDescriptor;var Ut=Object.getOwnPropertyNames;var Zt=Object.prototype.hasOwnProperty;var qt=(o,n)=>{for(var e in n)so(o,e,{get:n[e],enumerable:!0})},Vt=(o,n,e,_)=>{if(n&&typeof n=="object"||typeof n=="function")for(let r of Ut(n))!Zt.call(o,r)&&r!==e&&so(o,r,{get:()=>n[r],enumerable:!(_=Ot(n,r))||_.enumerable});return o};var Ht=o=>Vt(so({},"__esModule",{value:!0}),o);var Bs={};qt(Bs,{LiveLogger:()=>Lu,Logger:()=>Un,ReplayLogger:()=>Au});module.exports=Ht(Bs);var jt=require("tiny-typed-emitter");var a=class{b;o;constructor(n){this.b=n,this.o=0}skip(n=0){this.o+=n}bool(){return this.u8()===1}u8(){return this.b.readUint8(this.o++)}i8(){return this.b.readInt8(this.o++)}u16(){let n=this.b.readUint16LE(this.o);return this.o+=2,n}i16(){let n=this.b.readInt16LE(this.o);return this.o+=2,n}u32(){let n=this.b.readUint32LE(this.o);return this.o+=4,n}i32(){let n=this.b.readInt32LE(this.o);return this.o+=4,n}f32(){let n=this.b.readFloatLE(this.o);return this.o+=4,n}u64(){let n=this.b.readBigUint64LE(this.o);return this.o+=8,n}i64(){let n=this.b.readBigInt64LE(this.o);return this.o+=8,n}string(n){let e=this.u16();if(e<=n){e=e*2;let _=this.b.toString("utf16le",this.o,this.o+e);return this.o+=e,_}return""}bytes(n=0,e,_){if(e&&n>e)return Buffer.alloc(0);_&&(n=n*_);let r=Buffer.from(this.b.subarray(this.o,this.o+n));return this.o+=n,r}array(n,e,_){return _&&n>_?[]:new Array(n).fill(void 0).map(e)}},qn=class{b;o;constructor(n=65535){this.b=Buffer.allocUnsafe(n),this.o=0}get value(){return this.b.subarray(0,this.o)}skip(n=0){this.o+=n}bool(n=!1){return this.u8(n?1:0),n}u8(n=0){this.b.writeUInt8(n,this.o++)}i8(n=0){this.b.writeInt8(n,this.o++)}u16(n=0){this.o=this.b.writeUInt16LE(n,this.o)}i16(n=0){this.o=this.b.writeInt16LE(n,this.o)}u32(n=0){this.o=this.b.writeUInt32LE(n,this.o)}i32(n=0){this.o=this.b.writeInt32LE(n,this.o)}f32(n=0){this.o=this.b.writeFloatLE(n,this.o)}u64(n=0n){this.o=this.b.writeBigUInt64LE(BigInt(n),this.o)}i64(n=0n){this.o=this.b.writeBigInt64LE(BigInt(n),this.o)}string(n="",e=0){this.u16(n.length),n.length<=e&&(this.o+=this.b.write(n,this.o,"utf16le"))}bytes(n=Buffer.alloc(0),e={}){if(e.maxLen){let _=e.multiplier??1;if(n.length%_)throw new Error(`Error writing bytes, chunkSize should be a multiple of intut value size, got ${n.length}%${_}`);let r=n.length/_;if(r>e.maxLen)throw new Error(`Error writing bytes, input value size exceeded maxLen, got ${r} > ${e.maxLen}`);if(!e.lenType)throw new Error(`Error writing bytes, invalid lenType when writing chunks, got ${e.lenType}`);this[e.lenType](r)}else if(e.length&&n.length!==e.length)throw new Error(`Error writing bytes, input value size doesn't match opts.length, ${n.length} !== ${e.lenType}`);this.o+=n.copy(this.b,this.o)}array(n=[],e,_){if(n===void 0||n.length>e.maxLen){this[e.lenType](0);return}this[e.lenType](n.length),n.forEach(_)}};function io(o){let n=new a(o),e={};return n.skip(6),e.cooldown2=n.f32(),n.skip(1),e.cooldown1=n.f32(),e.skillId=n.u32(),e}var mo="PKTSkillCooldownNotify",g=43413;function L(o){let n={};return n.level=o.u8(),n.points=o.u16(),n.id=o.u32(),n}function lo(o){let n=new a(o),e={};return e.abilityDataList=n.array(n.u16(),()=>L(n),100),e}var co="PKTAbilityChangeNotify",W=32675;function Bu(o){let n={};return n.featureType=o.u16(),n.level=o.u32(),n}function ko(o){let n=new a(o),e={};return e.objectId=n.u64(),e.activeAbilityList=n.array(n.u16(),()=>Bu(n),60),e}var po="PKTActiveAbilityNotify",O=1154;function vo(o){let n=new a(o),e={};return e.addonFeatureIdList=n.bytes(n.u16(),200,4),e.objectId=n.u64(),e.addonSkillFeatureList=n.array(n.u16(),()=>{let _={};return _.skillId=n.u32(),_.addonSkillFeatureIdList=n.array(n.u16(),()=>n.u32(),5),_},200),e}var xo="PKTAddonSkillFeatureChangeNotify",U=11929;function So(o){let n=new a(o),e={};return e.packetResultCode=n.u32(),e.unk1_m=n.bytes(n.u32(),688),e}var To="PKTAuthTokenResult",No=34403;function Po(o){let n=new a(o),e={};return n.skip(1),e.paralyzationMaxPoint=n.u32(),n.skip(2),e.type=n.u8(),e.paralyzationPoint=n.u32(),e.objectId=n.u64(),e}var bo="PKTBlockSkillStateNotify",Z=45172;function ho(o){let n=new a(o),e={};return e.targetId=n.u64(),n.skip(1),e.type=n.u32(),n.skip(2),e.sourceId=n.u64(),e}var Io="PKTCounterAttackNotify",q=32191;function Eo(o){let n=new a(o),e={};return n.bool()&&(e.deathType=n.u8()),e.durabilityDecrement=n.u8(),e.targetId=n.u64(),e.effectId=n.u32(),n.bool()&&(e.damageAttr=n.u8()),e.unk2_m=n.u32(),n.bool()&&(e.abnormalStatusType=n.u8()),e.sourceId=n.u64(),e.directionYaw=n.u16(),e.unk0_m=n.u64(),e}var Do="PKTDeathNotify",V=17693;var Gt=[0,31,28,31,30,31,30,31,31,30,31,30,31];function Yt(o){return!(o%4||!(o%100)&&o%400)}function $t(o,n,e){if(o>99){if(o<1752||o==1752&&(n<9||n==9&&e<<14))return!1}else o+=1900;return e>0&&n<=12&&(e<=Gt[n]||e==29&&n==2&&Yt(o))}function Ko(o){let n=Number(o&0xffffffffn),e=Number(o>>32n&0xffffffffn),_=n&4095,r=(n&65535)>>12,s=n>>16&31;$t(_,r,s)||(_=r=s=0);let i=n>>21&31,S=n>>26&63,w=e&63,b=e>>6&16383;return i<24&&S<60&&w<60&&b<1e3||(i=24,S=w=b=0),new Date(Date.UTC(_<=99?_+1900:_,r-1,s,i,S,w,b))}function Mu(o){let n=0n;return n|=BigInt(o.getUTCMilliseconds())<<38n,n|=BigInt(o.getUTCSeconds())<<32n,n|=BigInt(o.getUTCMinutes())<<26n,n|=BigInt(o.getUTCHours())<<21n,n|=BigInt(o.getUTCDate())<<16n,n|=BigInt(o.getUTCMonth()+1)<<12n,n|=BigInt(o.getUTCFullYear()<2e3?o.getUTCFullYear()-1900:o.getUTCFullYear()),n}function c(o,n=0){let e=o.u16();return(e&4095)<2079?(o.o-=2,Ko(o.i64())):Ko(BigInt(e)&0xfffn|0x11000n)}function h(o,n=Ko(0x1181fn)){n.getUTCFullYear()>=2079?o.u16(Number(Mu(n)&0xffffn)):o.i64(Mu(n))}function N(o){let n={};return n.id=o.u32(),n.level=o.u16(),n.unk2=o.u8(),n.itemTint=o.bytes(o.u16(),5,14),n.slot=o.u16(),o.bool()&&(n.unk6_0=o.u8()),n.expireTime=c(o),n}function Ro(o){let n=new a(o),e={};return e.objectId=n.u64(),e.equipItemDataList=n.array(n.u16(),()=>N(n),33),e.unk2=n.u32(),e.unk3=n.u32(),e}var wo="PKTEquipChangeNotify",H=53204;function Lo(o){let n=new a(o),e={};return e.objectId=n.u64(),e.equipLifeToolDataList=n.array(n.u16(),()=>N(n),9),e}var Ao="PKTEquipLifeToolChangeNotify",z=51254;function Co(o){let n=new a(o),e={};return e.stance=n.u8(),n.skip(1),e.objectId=n.u64(),n.skip(2),e}var Bo="PKTIdentityStanceChangeNotify",G=17838;function Mo(o){let n=new a(o),e={};return e.abilityDataList=n.array(n.u16(),()=>L(n),100),e.struct_137=n.bytes(n.u16(),353,48),e}var jo="PKTInitAbility",Y=53450;function Fo(o){let n=new a(o),e={};return e.unk0=n.u32(),e.unk1=n.u8(),e.unk2=n.u32(),e.struct_595=n.string(128),e.playerId=n.u64(),e.unk5=n.u64(),e.lostArkDateTime=c(n),e.struct_30=n.array(n.u16(),()=>{let _={};return _.struct_578=n.string(32),_.struct_595=n.string(128),_.versionString=n.string(64),_},64),e}var go="PKTInitEnv",$=16937;function k(o){let n={};return n.occurTime=c(o),n.totalTime=o.f32(),n.struct_446=o.bytes(o.u16(),8,7),n.stackCount=o.u8(),n.effectInstanceId=o.u32(),o.bool()&&(n.value=o.bytes(16)),n.skillLevel=o.u8(),n.sourceId=o.u64(),n.endTick=o.u64(),o.bool()&&(n.unk11_0=o.u64()),n.statusEffectId=o.u32(),n}function Jt(o){if(o.length===0)return 0n;if(o.length>8)throw new Error("Value is too large");let n=Buffer.alloc(8);return o.copy(n),n.readBigInt64LE()}function u(o,n=0){let e=o.u8(),_=o.bytes(e>>1&7),r=Jt(_)<<4n|BigInt(e>>4);return e&1?-r:r}function d(o,n=0n){let e=Buffer.alloc(8),_=n<0n;e.writeBigInt64LE((_?-n:n)>>4n);let r=0;for(let[s,i]of e.entries())i!=0&&(r=s+1);if(r>7)throw new Error("Value is too large");o.u8(Number((_?-n:n)&0xfn)<<4|(r&7)<<1|(_?1:0)),o.bytes(e.subarray(0,r),{length:r})}function A(o){let n={};return n.unk0=o.u8(),n.unk1=o.u8(),n.unk2=u(o),n.unk3=o.u8(),n.unk4=o.u64(),n.unk5=o.u16(),n.unk6=u(o),n}function Oo(o){let n=new a(o),e={};return e.unk0=n.u32(),e.gearLevel=n.f32(),e.unk2=n.u32(),e.unk3=n.u8(),e.unk4=n.u64(),e.struct_341=n.string(7),e.characterId=n.u64(),e.unk7=n.u8(),e.unk8=n.u8(),e.unk9=n.u8(),e.unk10=n.u8(),e.level=n.u16(),e.unk12=n.u16(),e.unk13=n.u8(),e.playerId=n.u64(),e.unk15=n.u32(),e.unk16=n.u32(),e.unk17=n.u16(),e.unk18=n.u8(),n.bool()&&(e.unk20_0=n.u32()),e.unk21=n.bytes(120),e.unk22=n.u8(),e.unk23=n.u32(),e.unk24=n.u8(),e.name=n.string(20),e.unk26=n.u64(),e.unk27=n.u8(),e.struct_105=n.bytes(n.u16(),64),e.unk29=n.bytes(25),e.classId=n.u16(),e.unk31=n.u32(),e.unk32=n.u32(),e.unk33=n.u8(),e.struct_230=n.bytes(n.u16(),3,17),e.unk35=n.u64(),e.unk36=n.u8(),e.statusEffectDatas=n.array(n.u16(),()=>k(n),80),e.unk38=n.u64(),e.unk39=n.u8(),e.unk40=n.u16(),e.unk41=n.u8(),e.periodUpdateStatDataList=n.array(n.u16(),()=>A(n),5),e.unk43=n.u64(),e.unk44=n.u8(),e.unk45=n.u8(),e.unk46=n.u8(),e.unk47=n.u32(),e.unk48=n.u8(),e.unk49=n.u16(),e.unk50=n.u8(),e.unk51=n.u32(),e.struct_345=n.bytes(n.u16(),104,30),e.unk53=n.u32(),e.unk54=n.u8(),e.unk55=n.bytes(35),e.statPair=n.array(n.u16(),()=>{let _={};return _.statType=n.u8(),_.value=u(n),_},153),e.unk57=n.u32(),e}var Uo="PKTInitPC",J=17550;function ju(o){let n={},e=o.u16();return e===1&&(n.unk1_0=o.bytes(e)),n}function Fu(o){let n={};return n.unk0=o.u8(),n.unk1=o.u8(),n.unk2=o.u32(),n.unk3=o.u32(),n.unk4=o.u8(),n.struct_147=ju(o),n.unk6=o.u8(),n.struct_148=o.bytes(o.u16(),3,9),n}function gu(o){let n={};return n.unk0=o.u16(),n.unk1=o.u32(),n.unk2=o.u32(),n.unk3=o.u32(),n.unk4=o.u32(),n.struct_241=o.bytes(o.u16(),10,18),n.struct_263=o.bytes(o.u16(),2,9),n.unk7=o.u8(),n.struct_149=o.bytes(o.u16(),10,9),n.struct_397=o.bytes(o.u16(),2,10),n.unk10=o.u64(),n.unk11=o.u32(),n.struct_239=o.array(o.u16(),()=>Fu(o),3),n.unk13=o.u32(),n}function Wu(o){let n={};return n.unk0=o.u8(),n.unk1=o.u16(),n.struct_98=o.bytes(o.u32(),51),n.unk3=o.u16(),n.unk4=o.u8(),n.unk5=o.u16(),n.unk6=o.bytes(3),n.unk7=o.u8(),n}function Ou(o){let n={};return n.unk0=o.u8(),n.unk1=o.bytes(o.u16(),7),n.unk2=o.bytes(o.u16(),7),o.bool()&&(n.struct_749=Wu(o)),n}function Uu(o){let n={};return n.struct_440=o.bytes(o.u16(),3,10),n.unk1=o.u8(),n.unk2=o.u32(),n.struct_274=o.bytes(o.u16(),3,21),o.bool()&&(n.unk5_0=o.bytes(10)),n.unk6=o.u32(),o.bool()&&(n.struct_790=Ou(o)),n.unk9=o.u32(),n.unk10=o.u32(),n.itemTint=o.bytes(o.u16(),5,14),o.bool()&&(n.unk13_0=o.bytes(9)),n.unk14=o.u32(),o.bool()&&(n.unk1_0=o.u32(),n.struct_197=o.bytes(o.u16(),5,30),n.unk1_2=o.u32()),n.struct_237=o.bytes(o.u16(),3,7),o.bool()&&(n.struct_234=o.bytes(o.u16(),2,32)),n.struct_276=o.bytes(o.u16(),10,29),n.unk20=o.u32(),n}function Hn(o){let n={};return n.npcId=o.u32(),n.isDead=o.bool(),n}function qu(o){let n={};return n.unk0=o.u8(),n.struct_0=o.array(o.u16(),()=>{let e={};return e.unk1_0_0=o.u32(),e.struct_525=o.bytes(o.u16(),10),e},3),n.bossKillDataList=o.array(o.u16(),()=>Hn(o),3),n.unk3=o.u8(),n.unk4=o.u32(),n}function Vu(o){let n={};return n.unk0=o.u8(),n.struct_23=o.array(o.u16(),()=>{let e={};return e.unk1_0_0=o.u16(),e.unk1_0_1=o.u8(),e.struct_236=o.string(2),e},20),n.struct_237=o.bytes(o.u16(),3,7),n.struct_511=o.bytes(o.u16(),5,7),n.unk4=o.u8(),n.unk5=o.u8(),n}function Hu(o){let n={},e=o.u8();return e===1&&(n.struct_665=gu(o)),e===2&&(n.unk2_0=o.u8(),n.struct_1=o.array(o.u16(),()=>{let _={};return _.unk1_0_0=o.u32(),_.unk1_0_1=o.u8(),_.struct_525=o.bytes(o.u16(),10),_.unk1_0_3=o.u8(),_},3),n.struct_133=o.bytes(o.u16(),3,6)),e===3&&(n.unk3_0=o.bytes(26)),e===4&&(n.unk4_0=o.bytes(o.u16(),10,13),n.unk4_1=o.bytes(o.u16(),10,13),n.unk4_2=o.u32()),e===5&&(n.struct_664=Uu(o)),e===6&&(n.struct_610=qu(o)),e===7&&(n.unk7_0=o.bytes(9)),e===8&&(n.struct_657=Vu(o)),e===9&&(n.unk9_0=o.u8()),n}function zu(o){let n={};return o.u32()>0&&(n.serialNumber=o.u64(),n.id=o.u32(),n.level=o.u16(),n.slot=o.u16(),n.durability=o.u32(),n.unk1_6_m=o.u32(),n.flag=o.u32(),n.expireTime=c(o),n.lockUpdateTime=c(o),o.bool()&&(n.unk1_10_0=o.bytes(9)),n.unk1_11=o.u8(),n.unk1_12=o.u8(),n.unk1_13=o.u32(),n.struct_565=Hu(o),n.unk1_15=o.u32()),n}function Zo(o){let n=new a(o),e={};return e.storageType=n.u8(),e.itemDataList=n.array(n.u16(),()=>zu(n),80),e}var qo="PKTInitItem",Q=30984;function Gu(o){let n={};return n.unk0=o.u32(),o.bool()&&(n.unk2_0=o.u32()),n.unk3=o.u32(),n.unk4=o.u32(),o.bool()&&(n.unk6_0=o.bytes(9)),n}function Vo(o){let n=new a(o),e={};return e.unk0=n.u8(),e.statusEffectDatas=n.array(n.u16(),()=>k(n),80),e.unk2=n.u8(),e.struct_230=n.bytes(n.u16(),3,17),e.unk4=n.u64(),e.statPair=n.array(n.u16(),()=>{let _={};return _.statType=n.u8(),_.value=u(n),_},153),e.struct_424=n.array(n.u16(),()=>Gu(n),300),e.unk7=n.u32(),e.struct_345=n.bytes(n.u16(),104,30),e.unk9=n.u8(),e.struct_137=n.bytes(n.u16(),353,48),e.addonSkillFeatureList=n.array(n.u16(),()=>{let _={};return _.skillId=n.u32(),_.addonSkillFeatureIdList=n.array(n.u16(),()=>n.u32(),5),_},200),e.addonFeatureIdList=n.bytes(n.u16(),200,4),e.unk13=n.u64(),n.bool()&&(e.unk15_0=n.u32()),e.abilityDataList=n.array(n.u16(),()=>L(n),100),e}var Ho="PKTInitLocal",X=48680;function zo(o){let n=new a(o),e={};return e.account_CharacterId1=n.u64(),e.unk1=n.u32(),e.serverAddr=n.string(256),e.account_CharacterId2=n.u64(),e}var Go="PKTMigrationExecute",y=21930;function Yu(o){let n={};return n.lookData=o.bytes(o.u32(),512),n.unk1=o.u64(),n.unk2=o.u8(),n.unk3=o.u16(),n.lostArkString=o.string(20),n.unk5=o.u8(),n.unk6=o.u8(),n.equipItemDataList=o.array(o.u16(),()=>N(o),33),n.unk8=o.u64(),n}function m(o,n=0){return o.u16()*(2*Math.PI)/65536}function T(o,n=0){o.u16(Math.round(n*65536/(2*Math.PI))%65536)}function Yo(o){return o>>20===1?-((~o>>>0)+1&2097151):o}function t(o,n=0){let e=o.u64();return{x:Yo(Number(e&0x1fffffn)),y:Yo(Number(e>>21n&0x1fffffn)),z:Yo(Number(e>>42n&0x1fffffn))}}function l(o,n={x:0,y:0,z:0}){o.u64(BigInt(Math.round(n.x??0)>>>0&2097151)|BigInt(Math.round(n.y??0)>>>0&2097151)<<21n|BigInt(Math.round(n.z??0)>>>0&2097151)<<42n)}function zn(o){let n={};return o.bool()&&(n.unk1_0=o.u16()),n.unk2=o.u8(),n.objectId=o.u64(),n.periodUpdateStatDataList=o.array(o.u16(),()=>A(o),5),o.bool()&&(n.struct_275=o.bytes(o.u16(),12,12)),o.bool()&&(n.unk8_0=o.u8()),n.statusEffectDatas=o.array(o.u16(),()=>k(o),80),n.directionYaw=m(o),o.bool()&&(n.unk12_0=o.u8()),o.bool()&&(n.struct_342=o.bytes(o.u16(),11,9)),n.unk15=o.u8(),o.bool()&&(n.unk17_0=o.u32()),o.bool()&&(n.unk19_0=o.u8()),n.unk20=o.u8(),o.bool()&&(n.unk22_0=o.u64()),o.bool()&&(n.balanceLevel=o.u16()),o.bool()&&(n.unk26_0=o.u32()),o.bool()&&(n.unk28_0=o.u8()),o.bool()&&(n.unk30_0=o.u8()),o.bool()&&(n.struct_733=Yu(o)),n.typeId=o.u32(),o.bool()&&(n.unk35_0=o.u8()),o.bool()&&(n.transitIndex=o.u32()),n.statPair=o.array(o.u16(),()=>{let e={};return e.statType=o.u8(),e.value=u(o),e},153),n.position=t(o),n.unk40=o.u8(),n.unk41=o.u8(),n.level=o.u16(),o.bool()&&(n.unk44_0=o.u32()),n.unk45=o.u8(),n.spawnIndex=o.u32(),o.bool()&&(n.unk48_0=o.u8()),o.bool()&&(n.unk50_0=o.u32()),n}function $o(o){let n=new a(o),e={};return n.bool()&&(e.unk1_0=n.string(20),e.unk1_1=n.string(20)),n.bool()&&(e.unk2_0=n.u64()),e.npcStruct=zn(n),n.bool()&&(e.unk5_0=n.u8()),e.unk6=n.u8(),e}var Jo="PKTNewNpc",nn=26150;function Qo(o){let n=new a(o),e={};return n.skip(21),e.ownerId=n.u64(),n.skip(14),e.npcData=zn(n),e.publishReason=n.u8(),e}var Xo="PKTNewNpcSummon",on=13454;function Ju(o){let n={};return n.unk0=o.u32(),o.bool()&&(n.unk2_0=o.bytes(12)),n.unk3=o.u32(),n.unk4=o.bytes(12),n}function Qu(o){let n={};return n.name=o.string(20),n.unk4_m=o.u32(),n.identityData=o.bytes(25),n.classId=o.u16(),n.unk4=o.u32(),n.avatarHide=o.u8(),n.unk6=o.u32(),n.guildName=o.string(20),n.periodUpdateStatDataList=o.array(o.u16(),()=>A(o),5),n.unk29_m=o.u8(),n.unk0_m=o.bytes(5),n.maxItemLevel=o.f32(),n.unk7_m=o.u32(),n.avgItemLevel=o.f32(),n.firstHonorTitleId=o.u16(),n.unk17_m=o.u8(),n.unk1_m=o.u8(),n.unk17=o.u8(),n.statPair=o.array(o.u16(),()=>{let e={};return e.statType=o.u8(),e.value=u(o),e},153),n.guildId=o.u64(),n.unk32_m=o.u8(),n.unk5_m=o.u32(),n.addonFeatureIdList=o.bytes(o.u16(),200,4),n.unk23=o.u64(),n.petId=o.u32(),n.playerId=o.u64(),n.equipItemDataList=o.array(o.u16(),()=>N(o),33),n.heading=m(o),n.unk23_m=o.u8(),n.position=t(o),n.unk25_m=o.u8(),n.statusEffectDatas=o.array(o.u16(),()=>k(o),80),n.addonSkillFeatureList=o.array(o.u16(),()=>{let e={};return e.skillId=o.u32(),e.addonSkillFeatureIdList=o.array(o.u16(),()=>o.u32(),5),e},200),n.unk2_m=o.u8(),n.unk34=o.u32(),n.lookData=o.bytes(o.u32(),512),n.unk36=o.u8(),n.equipLifeToolDataList=o.array(o.u16(),()=>N(o),9),n.worldId=o.u8(),n.rvRLevel=o.u16(),n.characterId=o.u64(),n.unk41=o.u8(),n.unk45_m=o.u32(),n.level=o.u16(),n.secondHonorTitleId=o.u16(),o.bool()&&(n.grabbedData=o.bytes(12)),n}function yo(o){let n=new a(o),e={};return n.bool()&&(e.unk5_0_m=n.bytes(20)),n.bool()&&(e.trackMoveInfo=Ju(n)),e.unk2_m=n.u8(),e.pcStruct=Qu(n),n.bool()&&(e.struct_60=n.array(n.u16(),()=>{let _={};return _.unk1_0_0=n.u64(),_.itemTint=n.bytes(n.u16(),5,14),_.unk1_0_2=n.u32(),_},5)),n.bool()&&(e.unk1_0=n.u32(),e.itemTint=n.bytes(n.u16(),5,14),e.unk1_2=n.u64()),n.bool()&&(e.unk4_0_m=n.bytes(12)),n.bool()&&(e.unk3_0_m=n.u32()),e.unk0_m=n.u8(),e}var ne="PKTNewPC",en=21297;function C(o,n=0){return{first:o.u8(),second:o.u8(),third:o.u8()}}function Gn(o,n){o.u8(n.first),o.u8(n.second),o.u8(n.third)}function B(o,n=0){return{first:o.u16(),second:o.u16(),third:o.u16()}}function Yn(o,n){o.u16(n.first),o.u16(n.second),o.u16(n.third)}function Xu(o){let n={};return n.tripodIndex=C(o),n.skillLevel=o.u8(),n.unk2=o.u32(),n.unk3=o.u64(),n.projectileId=o.u64(),n.unk5=o.u16(),n.skillEffect=o.u32(),n.unk7=o.u32(),n.unk8=o.u64(),o.bool()&&(n.struct_342=o.bytes(o.u16(),11,9)),n.ownerId=o.u64(),n.unk12=o.u8(),n.unk13=o.u32(),n.unk14=o.u16(),o.bool()&&(n.unk16_0=o.u64()),n.skillId=o.u32(),o.bool()&&(n.unk19_0=o.u32()),n.unk20=o.u8(),n.chainSkillEffect=o.u32(),n.targetObjectId=o.u64(),n.tripodLevel=B(o),n}function _e(o){let n=new a(o),e={};return e.projectileInfo=Xu(n),e}var ae="PKTNewProjectile",_n=45071;function yu(o){let n={};return n.skillId=o.u32(),n.unk1=o.u8(),n.position=t(o),n.unk3=o.u16(),n.ownerId=o.u64(),n.unk5=o.u8(),n.objectId=o.u64(),n.unk7=o.u8(),n.skillEffect=o.u32(),n.unk9=o.u32(),o.bool()&&(n.struct_342=o.bytes(o.u16(),11,9)),n.unk12=o.u32(),n.unk13=o.u32(),n}function re(o){let n=new a(o),e={};return e.unk0=n.u8(),e.trapData=yu(n),e.unk2=n.u8(),e}var ue="PKTNewTrap",an=5934;function te(o){let n=new a(o),e={};return e.hitCheckTime=n.u32(),e.paralyzationMaxPoint=n.u32(),e.paralyzationPoint=n.u32(),n.skip(1),e.objectId=n.u64(),e.noHitCheckTime=n.u32(),n.skip(1),e.decreasePoint=n.u32(),e.enable=n.bool(),e}var se="PKTParalyzationStateNotify",rn=8116;function nt(o){let n={};return n.transitIndex=o.u32(),n.unk1=o.u8(),n.unk2=o.u8(),n.unk3=o.u8(),n.zoneInstId=o.u64(),n.zoneId=o.u32(),n.unk6=o.u8(),n.name=o.string(20),n.characterLevel=o.u16(),n.gearLevel=o.f32(),n.partyMemberNumber=o.u8(),n.characterId=o.u64(),n.worldId=o.u8(),n.position=t(o),n.maxHp=u(o),n.curHp=u(o),n.auths=o.u8(),n.unk17=o.u16(),n.classId=o.u16(),n.unk19=o.u8(),n}function ie(o){let n=new a(o),e={};return e.lootGrade=n.u32(),e.raidInstanceId=n.u32(),e.partyInstanceId=n.u32(),e.memberDatas=n.array(n.u16(),()=>nt(n),40),e.partyType=n.u8(),e.partyLootType=n.u8(),e}var me="PKTPartyInfo",un=36411;function de(o){let n=new a(o),e={};return e.partyLeaveType=n.u8(),e.name=n.string(20),e.partyInstanceId=n.u32(),e}var fe="PKTPartyLeaveResult",tn=238;function le(o){let n=new a(o),e={};return e.objectId=n.u64(),e.unk0_m=n.u8(),e.passiveStatusEffectList=n.array(n.u16(),()=>n.u32(),10),e}var ce="PKTPartyPassiveStatusEffectAddNotify",sn=25251;function ke(o){let n=new a(o),e={};return e.objectId=n.u64(),e.passiveStatusEffectList=n.array(n.u16(),()=>n.u32(),10),e}var pe="PKTPartyPassiveStatusEffectRemoveNotify",mn=58476;function ve(o){let n=new a(o),e={};return e.unk0=n.u8(),e.playerIdOnRefresh=n.u64(),e.unk2=n.u64(),e.characterId=n.u64(),e.statusEffectDatas=n.array(n.u16(),()=>k(n),80),e}var xe="PKTPartyStatusEffectAddNotify",dn=27097;function Se(o){let n=new a(o),e={};return e.unk0=n.u64(),e.characterId=n.u64(),e.reason=n.u8(),e.statusEffectIds=n.array(n.u16(),()=>n.u32(),80),e}var Te="PKTPartyStatusEffectRemoveNotify",fn=51033;function Ne(o){let n=new a(o),e={};return n.skip(13),e.raidInstanceId=n.u32(),n.skip(8),e.characterId=n.u64(),n.skip(1),e.partyInstanceId=n.u32(),n.skip(5),e}var Pe="PKTPartyStatusEffectResultNotify",ln=4215;function be(o){let n=new a(o),e={};return e.passiveStatusEffectList=n.array(n.u16(),()=>n.u32(),10),e}var he="PKTPassiveStatusEffectAddNotify",cn=9409;function Ie(o){let n=new a(o),e={};return e.passiveStatusEffectList=n.array(n.u16(),()=>n.u32(),10),e}var Ee="PKTPassiveStatusEffectRemoveNotify",kn=25070;function De(o){let n=new a(o),e={};return e.initBraveHeartCount=n.u8(),e.startTick=n.u64(),e.endTick=n.u64(),e.braveHeartCount=n.u8(),e.unk1_m=n.bool(),e.unk6_m=n.u64(),e.unk4_m=n.u64(),e.raidResult=n.u8(),e.bossKillDataList=n.array(n.u16(),()=>Hn(n),3),e.unk11_m=n.bool(),e.unk0_m=n.bool(),e.totalTime=n.u64(),e.unk5_m=n.u64(),e.raidId=n.u32(),e}var Ke="PKTRaidBegin",pn=46280;function Re(o){let n=new a(o),e={};return e.typeId=n.u32(),n.skip(1),e}var we="PKTRaidBossKillNotify",vn=54487;function Le(o){let n=new a(o),e={};return e.unk0=n.u8(),e.unk1=n.u8(),e.unk2=n.u64(),e.struct_51=n.array(n.u16(),()=>{let _={};return _.unk1_0_0=u(n),_.unk1_0_1=n.u32(),_.unk1_0_2=u(n),_.struct_531=n.bytes(n.u16(),3),_},3),e.raidResult=n.u8(),e.unk5=n.u64(),e.unk6=n.u64(),e.unk7=n.u64(),e}var Ae="PKTRaidResult",xn=50274;function ot(o){let n={};return n.objectId=o.u64(),n.unpublishReason=o.u8(),n}function Ce(o){let n=new a(o),e={};return e.unpublishedObjects=n.array(n.u16(),()=>ot(n),200),e}var Be="PKTRemoveObject",Sn=32288;function Me(o){let n=new a(o),e={};return e.caster=n.u64(),n.skip(1),e.newPosition=t(n),e.newDirectionYaw=m(n),e.skillId=n.u32(),n.skip(2),e.cancelReason=n.u8(),e}var je="PKTSkillCancelNotify",Tn=57929;function Fe(o){let n=new a(o),e={};return e.caster=n.u64(),e.skillId=n.u32(),n.skip(1),e.skillLevel=n.u8(),n.skip(1),e}var ge="PKTSkillCastNotify",Nn=48101;function $n(o,n=0){let e={},_=o.u8();return _&1&&(e.moveTime=o.u32()),_&2&&(e.standUpTime=o.u32()),_&4&&(e.downTime=o.u32()),_&8&&(e.freezeTime=o.u32()),_&16&&(e.moveHeight=o.u32()),_&32&&(e.farmostDist=o.u32()),_&64&&(e.flag40=o.bytes(o.u16(),6)),e}function et(o,n){let e=(n.moveTime===void 0?0:1)|(n.standUpTime===void 0?0:2)|(n.downTime===void 0?0:4)|(n.freezeTime===void 0?0:8)|(n.moveHeight===void 0?0:16)|(n.farmostDist===void 0?0:32)|(n.flag40===void 0?0:64);o.u8(e),e&1&&o.u32(n.moveTime),e&2&&o.u32(n.standUpTime),e&4&&o.u32(n.downTime),e&8&&o.u32(n.freezeTime),e&16&&o.u32(n.moveHeight),e&32&&o.u32(n.farmostDist),e&64&&o.bytes(n.flag40,{maxLen:6,lenType:"u16"})}function Jn(o){let n={};return n.maxHp=u(o),n.damageType=o.u8(),n.damage=u(o),n.unk3_m=o.u16(),n.curHp=u(o),n.targetId=o.u64(),n.modifier=o.u8(),o.bool()&&(n.damageAttr=o.u8()),n}function rt(o){let n={};return n.unk8_m=o.u16(),n.unk2_m=o.u64(),n.unk3_m=o.u16(),n.unk1_m=o.u8(),n.unk4_m=o.u16(),n.skillMoveOptionData=$n(o),n.position=t(o),n.skillDamageEvent=Jn(o),n.destination=t(o),n}function We(o){let n=new a(o),e={};return e.skillEffectId=n.u32(),e.unk2_m=n.u32(),e.skillId=n.u32(),e.skillDamageAbnormalMoveEvents=n.array(n.u16(),()=>rt(n),50),e.sourceId=n.u64(),e.unk1_m=n.u8(),e}var Oe="PKTSkillDamageAbnormalMoveNotify",Pn=2222;function Ue(o){let n=new a(o),e={};return e.skillId=n.u32(),e.skillDamageEvents=n.array(n.u16(),()=>Jn(n),50),n.bool()&&(e.unk3_0=n.u32()),e.sourceId=n.u64(),n.bool()&&(e.skillEffectId=n.u32()),e.skillLevel=n.u8(),e}var Ze="PKTSkillDamageNotify",bn=15734;function qe(o){let n=new a(o),e={};return n.skip(4),e.skillId=n.u32(),n.skip(12),e.stage=n.u8(),n.skip(17),e.sourceId=n.u64(),n.skip(8),e}var Ve="PKTSkillStageNotify",hn=43936;function Qn(o,n=0){let e={},_=o.u8();return _&1&&(e.layerIndex=o.u8()),_&2&&(e.startStageIndex=o.u8()),_&4&&(e.transitIndex=o.u32()),_&8&&(e.stageStartTime=o.u32()),_&16&&(e.farmostDistance=o.u32()),_&32&&(e.tripodIndex=C(o)),_&64&&(e.tripodLevel=B(o)),e}function ut(o,n){let e=(n.layerIndex===void 0?0:1)|(n.startStageIndex===void 0?0:2)|(n.transitIndex===void 0?0:4)|(n.stageStartTime===void 0?0:8)|(n.farmostDistance===void 0?0:16)|(n.tripodIndex===void 0?0:32)|(n.tripodLevel===void 0?0:64);o.u8(e),e&1&&o.u8(n.layerIndex),e&2&&o.u8(n.startStageIndex),e&4&&o.u32(n.transitIndex),e&8&&o.u32(n.stageStartTime),e&16&&o.u32(n.farmostDistance),e&32&&Gn(o,n.tripodIndex),e&64&&Yn(o,n.tripodLevel)}function He(o){let n=new a(o),e={};return e.sourceId=n.u64(),e.skillId=n.u32(),e.aimTargetPosition=t(n),n.bool()&&(e.unk1_m=n.u32()),e.newDirectionYaw=m(n),n.bool()&&(e.aiStateId=n.u32()),e.newPosition=t(n),e.curPosition=t(n),n.bool()&&(e.pitchRotation=m(n)),e.skillLevel=n.u8(),e.curDirectionYaw=m(n),e.skillOptionData=Qn(n),e}var ze="PKTSkillStartNotify",In=22915;function Ge(o){let n=new a(o),e={};return n.bool()&&(e.unk1_0=n.u32()),e.objectId=n.u64(),e.unk3=n.array(n.u16(),()=>{let _={};return _.statType=n.u8(),_.value=u(n),_},153),e.unk4=n.array(n.u16(),()=>{let _={};return _.statType=n.u8(),_.value=u(n),_},153),e.unk5=n.u8(),e}var Ye="PKTStatChangeOriginNotify",$e=55718;function Je(o){let n=new a(o),e={};return e.objectId=n.u64(),e.new=n.bool(),n.bool()&&(e.unk3_0=n.u64()),e.statusEffectData=k(n),e.unk5=n.u64(),e}var Qe="PKTStatusEffectAddNotify",En=2816;function Xe(o){let n=new a(o),e={};return e.reason=n.u8(),e.statusEffectIds=n.array(n.u16(),()=>n.u32(),80),e.objectId=n.u64(),e}var ye="PKTStatusEffectRemoveNotify",Dn=35019;function n_(o){let n=new a(o),e={};return n.skip(3),e.targetId=n.u64(),e.expirationTick=n.u64(),e.effectInstanceId=n.u32(),e}var o_="PKTStatusEffectDurationNotify",Kn=13129;function e_(o){let n=new a(o),e={};return e.objectId=n.u64(),e.characterId=n.u64(),n.skip(2),e.value=n.u32(),n.skip(4),e.effectInstanceId=n.u32(),n.skip(1),e}var __="PKTStatusEffectSyncDataNotify",Rn=21211;function a_(o){let n=new a(o),e={};return n.skip(1),e.step=n.u32(),e.triggerId=n.u32(),e.unk2_m=n.bool(),e}var r_="PKTTriggerBossBattleStatus",wn=56184;function u_(o){let n=new a(o),e={};return e.involvedPCs=n.array(n.u16(),()=>n.u64(),40),e.triggerId=n.u32(),e.packetResultCode=n.u32(),e.unk0_m=n.u32(),e}var t_="PKTTriggerFinishNotify",Ln=57434;function s_(o){let n=new a(o),e={};return e.sourceId=n.u64(),e.involvedPCs=n.array(n.u16(),()=>n.u64(),40),e.triggerSignalType=n.u32(),e.triggerId=n.u32(),e}var i_="PKTTriggerStartNotify",An=59991;function m_(o){let n=new a(o),e={};return e.position=n.u64(),e.maxHp=u(n),e.curHp=u(n),e.statusEffectDatas=n.array(n.u16(),()=>k(n),80),e.characterId=n.u64(),e.unk0_m=n.u32(),e}var d_="PKTTroopMemberUpdateMinNotify",Cn=52233;function f_(o){let n=new a(o),e={};return n.skip(1),e.playerId=n.u64(),n.skip(1),e.identityGauge1=n.u32(),e.identityGauge2=n.u32(),e.identityGauge3=n.u32(),n.skip(1),e}var l_="PKTIdentityGaugeChangeNotify",Bn=51434;function c_(o){let n=new a(o),e={};return e.totalMembers=n.array(n.u16(),()=>n.u64(),40),e.firstPCEnterTick=n.u64(),e.zoneId=n.u32(),e.zoneInstId=n.u64(),e.completeMembers=n.array(n.u16(),()=>n.u64(),40),e.loadComplete=n.bool(),e.zoneLevel=n.u8(),e}var k_="PKTZoneMemberLoadStatusNotify",Mn=58728;function p_(o){let n=new a(o),e={};return n.skip(1),e.objectId=n.u64(),e}var v_="PKTZoneObjectUnpublishNotify",jn=37585;function st(o){let n={};return n.target=o.u8(),n.instanceId=o.u32(),o.skip(4),n.id=o.u32(),n.stackCount=o.u8(),n}function x_(o){let n=new a(o),e={};return e.zoneStatusEffectDataList=n.array(n.u16(),()=>st(n),4),e}var S_="PKTZoneStatusEffectAddNotify",Fn=52575;function T_(o){let n=new a(o),e={};return n.skip(2),e.statusEffectId=n.u32(),e}var N_="PKTZoneStatusEffectRemoveNotify",gn=2142;var P_=new Map([[g,[mo,io]],[W,[co,lo]],[O,[po,ko]],[U,[xo,vo]],[No,[To,So]],[Z,[bo,Po]],[q,[Io,ho]],[V,[Do,Eo]],[H,[wo,Ro]],[z,[Ao,Lo]],[G,[Bo,Co]],[Y,[jo,Mo]],[$,[go,Fo]],[J,[Uo,Oo]],[Q,[qo,Zo]],[X,[Ho,Vo]],[y,[Go,zo]],[nn,[Jo,$o]],[on,[Xo,Qo]],[en,[ne,yo]],[_n,[ae,_e]],[an,[ue,re]],[rn,[se,te]],[un,[me,ie]],[tn,[fe,de]],[sn,[ce,le]],[mn,[pe,ke]],[dn,[xe,ve]],[fn,[Te,Se]],[ln,[Pe,Ne]],[cn,[he,be]],[kn,[Ee,Ie]],[pn,[Ke,De]],[vn,[we,Re]],[xn,[Ae,Le]],[Sn,[Be,Ce]],[Tn,[je,Me]],[Nn,[ge,Fe]],[Pn,[Oe,We]],[bn,[Ze,Ue]],[hn,[Ve,qe]],[In,[ze,He]],[$e,[Ye,Ge]],[En,[Qe,Je]],[Dn,[ye,Xe]],[Kn,[o_,n_]],[Rn,[__,e_]],[wn,[r_,a_]],[Ln,[t_,u_]],[An,[i_,s_]],[Cn,[d_,m_]],[Bn,[l_,f_]],[Mn,[k_,c_]],[jn,[v_,p_]],[Fn,[S_,x_]],[gn,[N_,T_]]]);var mt=new Map([[g,[101]],[W,[0]],[O,[1]],[U,[2]],[Z,[4]],[q,[5]],[V,[6]],[Y,[7]],[$,[8]],[J,[9]],[X,[10]],[y,[11]],[nn,[12]],[on,[13]],[en,[14]],[_n,[15]],[rn,[16]],[un,[17]],[tn,[18]],[sn,[19]],[mn,[20]],[dn,[21]],[fn,[22]],[ln,[23]],[cn,[24]],[kn,[25]],[vn,[26]],[xn,[27]],[Sn,[28]],[Pn,[29]],[bn,[30]],[hn,[31]],[In,[32]],[En,[34]],[Dn,[35]],[Kn,[36]],[Rn,[37]],[wn,[38]],[Ln,[39]],[An,[40]],[Cn,[41]],[Bn,[42]],[jn,[43]],[Fn,[44]],[gn,[45]],[Nn,[46]],[G,[47]],[H,[48]],[z,[49]],[Q,[50]],[pn,[52]],[Mn,[51]],[an,[53]],[Tn,[54]]]);function b_(o,n){let e={};return e.cooldown1=o.f32(),e.cooldown2=o.f32(),e.skillId=o.u32(),e}function h_(o,n){o.f32(n.cooldown1),o.f32(n.cooldown2),o.u32(n.skillId)}var I_="SkillCooldownNotify";function M(o,n){let e={};return e.points=o.u16(),e.id=o.u32(),e.level=o.u8(),e}function j(o,n){o.u16(n.points),o.u32(n.id),o.u8(n.level)}function D_(o,n){let e={};return e.abilityDataList=o.array(o.u16(),()=>M(o,n),100),e}function K_(o,n){o.array(n.abilityDataList,{maxLen:100,lenType:"u16"},e=>{j(o,e)})}var R_="AbilityChangeNotify";function dt(o,n){let e={};return e.featureType=o.u16(),e.level=o.u32(),e}function ft(o,n){o.u16(n.featureType),o.u32(n.level)}function w_(o,n){let e={};return e.activeAbilityList=o.array(o.u16(),()=>dt(o,n),60),e.objectId=o.u64(),e}function L_(o,n){o.array(n.activeAbilityList,{maxLen:60,lenType:"u16"},e=>{ft(o,e)}),o.u64(n.objectId)}var A_="ActiveAbilityNotify";function C_(o,n){let e={};return e.objectId=o.u64(),e.addonSkillFeatureList=o.array(o.u16(),()=>{let _={};return _.addonSkillFeatureIdList=o.array(o.u16(),()=>o.u32(),5),_.skillId=o.u32(),_},200),e}function B_(o,n){o.u64(n.objectId),o.array(n.addonSkillFeatureList,{maxLen:200,lenType:"u16"},e=>{o.array(e.addonSkillFeatureIdList,{maxLen:5,lenType:"u16"},_=>{o.u32(_)}),o.u32(e.skillId)})}var M_="AddonSkillFeatureChangeNotify";function j_(o,n){let e={};return e.paralyzationMaxPoint=o.u32(),e.type=o.u8(),e.objectId=o.u64(),e.paralyzationPoint=o.u32(),e}function F_(o,n){o.u32(n.paralyzationMaxPoint),o.u8(n.type),o.u64(n.objectId),o.u32(n.paralyzationPoint)}var g_="BlockSkillStateNotify";function W_(o,n){let e={};return e.sourceId=o.u64(),e.targetId=o.u64(),e.type=o.u32(),e}function O_(o,n){o.u64(n.sourceId),o.u64(n.targetId),o.u32(n.type)}var U_="CounterAttackNotify";function Z_(o,n){let e={};return e.sourceId=o.u64(),e.targetId=o.u64(),n>=4?(e.effectId=o.u32(),e.directionYaw=o.u16(),e.deathType=o.u8(),e.durabilityDecrement=o.u8(),e.abnormalStatusType=o.u8(),e.damageAttr=o.u8(),e.unk0_m=o.u64(),e.unk2_m=o.u32()):(e.effectId=0,e.directionYaw=0,e.deathType=0,e.durabilityDecrement=0,e.abnormalStatusType=0,e.damageAttr=0,e.unk0_m=0n,e.unk2_m=0),e}function q_(o,n){o.u64(n.sourceId),o.u64(n.targetId),o.u32(n.effectId),o.u16(n.directionYaw),o.u8(n.deathType??0),o.u8(n.durabilityDecrement),o.u8(n.abnormalStatusType??0),o.u8(n.damageAttr??0),o.u64(n.unk0_m),o.u32(n.unk2_m)}var V_="DeathNotify";function H_(o,n){let e={};return e.abilityDataList=o.array(o.u16(),()=>M(o,n),100),e}function z_(o,n){o.array(n.abilityDataList,{maxLen:100,lenType:"u16"},e=>{j(o,e)})}var G_="InitAbility";function Y_(o,n){let e={};return e.playerId=o.u64(),e}function $_(o,n){o.u64(n.playerId)}var J_="InitEnv";function v(o,n){let e={};return e.skillLevel=o.u8(),e.occurTime=c(o,n),e.statusEffectId=o.u32(),e.sourceId=o.u64(),e.totalTime=o.f32(),e.endTick=o.u64(),o.bool()&&(e.value=o.bytes(16)),e.effectInstanceId=o.u32(),n>=1?e.stackCount=o.u8():e.stackCount=1,e}function x(o,n){o.u8(n.skillLevel),h(o,n.occurTime),o.u32(n.statusEffectId),o.u64(n.sourceId),o.f32(n.totalTime),o.u64(n.endTick),o.bool(n.value!==void 0)&&o.bytes(n.value,{length:16}),o.u32(n.effectInstanceId),o.u8(n.stackCount)}function Q_(o,n){let e={};return e.statPair=o.array(o.u16(),()=>{let _={};return _.StatType=o.u8(),_.Value=u(o,n),_},152),e.name=o.string(20),e.level=o.u16(),e.statusEffectDatas=o.array(o.u16(),()=>v(o,n),80),e.characterId=o.u64(),e.gearLevel=o.f32(),e.playerId=o.u64(),e.classId=o.u16(),e}function X_(o,n){o.array(n.statPair,{maxLen:152,lenType:"u16"},e=>{o.u8(e.statType),d(o,e.value)}),o.string(n.name,20),o.u16(n.level),o.array(n.statusEffectDatas,{maxLen:80,lenType:"u16"},e=>{x(o,e)}),o.u64(n.characterId),o.f32(n.gearLevel),o.u64(n.playerId),o.u16(n.classId)}var y_="InitPC";function na(o,n){let e={};return e.statPair=o.array(o.u16(),()=>{let _={};return _.statType=o.u8(),_.value=u(o,n),_},152),e.statusEffectDatas=o.array(o.u16(),()=>v(o,n),80),e.addonSkillFeatureList=o.array(o.u16(),()=>{let _={};return _.addonSkillFeatureIdList=o.array(o.u16(),()=>o.u32(),5),_.skillId=o.u32(),_},200),e.abilityDataList=o.array(o.u16(),()=>M(o,n),100),e}function oa(o,n){o.array(n.statPair,{maxLen:152,lenType:"u16"},e=>{o.u8(e.statType),d(o,e.value)}),o.array(n.statusEffectDatas,{maxLen:80,lenType:"u16"},e=>{x(o,e)}),o.array(n.addonSkillFeatureList,{maxLen:200,lenType:"u16"},e=>{o.array(e.addonSkillFeatureIdList,{maxLen:5,lenType:"u16"},_=>{o.u32(_)}),o.u32(e.skillId)}),o.array(n.abilityDataList,{maxLen:100,lenType:"u16"},e=>{j(o,e)})}var ea="InitLocal";function _a(o,n){let e={};return e.account_CharacterId1=o.u64(),e.serverAddr=o.string(256),e.account_CharacterId2=o.u64(),e}function aa(o,n){o.u64(n.account_CharacterId1),o.string(n.serverAddr,256),o.u64(n.account_CharacterId2)}var ra="MigrationExecute";function Xn(o,n){let e={};return e.spawnIndex=o.u32(),e.objectId=o.u64(),o.bool()&&(e.transitIndex=o.u32()),e.position=t(o,n),e.statusEffectDatas=o.array(o.u16(),()=>v(o,n),80),e.directionYaw=m(o,n),e.statPair=o.array(o.u16(),()=>{let _={};return _.statType=o.u8(),_.value=u(o,n),_},152),e.typeId=o.u32(),n>=1?(e.level=o.u16(),o.bool()&&(e.balanceLevel=o.u16())):e.level=0,e}function yn(o,n){o.u32(n.spawnIndex),o.u64(n.objectId),o.bool(n.transitIndex!==void 0)&&o.u32(n.transitIndex),l(o,n.position),o.array(n.statusEffectDatas,{maxLen:80,lenType:"u16"},e=>{x(o,e)}),T(o,n.directionYaw),o.array(n.statPair,{maxLen:152,lenType:"u16"},e=>{o.u8(e.statType),d(o,e.value)}),o.u32(n.typeId),o.u16(n.level),o.bool(n.balanceLevel!==void 0)&&o.u16(n.balanceLevel)}function ua(o,n){let e={};return e.npcStruct=Xn(o,n),e}function ta(o,n){yn(o,n.npcStruct)}var sa="NewNpc";function ia(o,n){let e={};return e.publishReason=o.u8(),e.ownerId=o.u64(),e.npcData=Xn(o,n),e}function ma(o,n){o.u8(n.publishReason),o.u64(n.ownerId),yn(o,n.npcData)}var da="NewNpcSummon";function K(o,n){let e={};return e.slot=o.u16(),e.level=o.u16(),e.itemTint=o.bytes(o.u16(),3,14),e.expireTime=c(o),e.id=o.u32(),e}function R(o,n){o.u16(n.slot),o.u16(n.level),o.bytes(n.itemTint,{maxLen:3,lenType:"u16",multiplier:14}),h(o,n.expireTime),o.u32(n.id)}function ct(o,n){let e={};return e.maxItemLevel=o.f32(),e.statPair=o.array(o.u16(),()=>{let _={};return _.statType=o.u8(),_.value=u(o,n),_},152),e.name=o.string(20),e.heading=m(o,n),e.characterId=o.u64(),e.playerId=o.u64(),e.addonSkillFeatureList=o.array(o.u16(),()=>{let _={};return _.addonSkillFeatureIdList=o.array(o.u16(),()=>o.u32(),5),_.skillId=o.u32(),_},200),e.classId=o.u16(),e.level=o.u16(),e.statusEffectDatas=o.array(o.u16(),()=>v(o,n),80),n>=1?(e.avgItemLevel=o.f32(),e.position=t(o),e.equipItemDataList=o.array(o.u16(),()=>K(o,n),32),e.equipLifeToolDataList=o.array(o.u16(),()=>K(o,n),9),e.guildName=o.string(20),n>=2?e.guildId=o.u64():e.guildId=BigInt(o.u32())):(e.avgItemLevel=e.maxItemLevel,e.position={x:0,y:0,z:0},e.equipItemDataList=[],e.equipLifeToolDataList=[],e.guildName="",e.guildId=0n),e}function kt(o,n){o.f32(n.maxItemLevel),o.array(n.statPair,{maxLen:152,lenType:"u16"},e=>{o.u8(e.statType),d(o,e.value)}),o.string(n.name,20),T(o,n.heading),o.u64(n.characterId),o.u64(n.playerId),o.array(n.addonSkillFeatureList,{maxLen:200,lenType:"u16"},e=>{o.array(e.addonSkillFeatureIdList,{maxLen:5,lenType:"u16"},_=>{o.u32(_)}),o.u32(e.skillId)}),o.u16(n.classId),o.u16(n.level),o.array(n.statusEffectDatas,{maxLen:80,lenType:"u16"},e=>{x(o,e)}),o.f32(n.avgItemLevel),l(o,n.position),o.array(n.equipItemDataList,{maxLen:32,lenType:"u16"},e=>{R(o,e)}),o.array(n.equipLifeToolDataList,{maxLen:9,lenType:"u16"},e=>{R(o,e)}),o.string(n.guildName,20),o.u64(n.guildId)}function la(o,n){let e={};return e.pcStruct=ct(o,n),e}function ca(o,n){kt(o,n.pcStruct)}var ka="NewPC";function pt(o,n){let e={};return e.tripodIndex=C(o,n),e.chainSkillEffect=o.u32(),e.skillEffect=o.u32(),e.skillId=o.u32(),e.targetObjectId=o.u64(),e.ownerId=o.u64(),e.skillLevel=o.u8(),e.projectileId=o.u64(),e.tripodLevel=B(o,n),e}function vt(o,n){Gn(o,n.tripodIndex),o.u32(n.chainSkillEffect),o.u32(n.skillEffect),o.u32(n.skillId),o.u64(n.targetObjectId),o.u64(n.ownerId),o.u8(n.skillLevel),o.u64(n.projectileId),Yn(o,n.tripodLevel)}function pa(o,n){let e={};return e.projectileInfo=pt(o,n),e}function va(o,n){vt(o,n.projectileInfo)}var xa="NewProjectile";function Sa(o,n){let e={};return e.enable=o.bool(),e.paralyzationPoint=o.u32(),e.decreasePoint=o.u32(),e.paralyzationMaxPoint=o.u32(),e.noHitCheckTime=o.u32(),e.hitCheckTime=o.u32(),e.objectId=o.u64(),e}function Ta(o,n){o.bool(n.enable),o.u32(n.paralyzationPoint),o.u32(n.decreasePoint),o.u32(n.paralyzationMaxPoint),o.u32(n.noHitCheckTime),o.u32(n.hitCheckTime),o.u64(n.objectId)}var Na="ParalyzationStateNotify";function xt(o,n){let e={};return e.maxHp=u(o,n),e.characterId=o.u64(),e.position=t(o,n),e.transitIndex=o.u32(),e.curHp=u(o,n),e.characterLevel=o.u16(),e.gearLevel=o.f32(),e.zoneId=o.u32(),e.partyMemberNumber=o.u8(),e.name=o.string(20),e.zoneInstId=o.u64(),e.worldId=o.u8(),e.classId=o.u16(),e.auths=o.u8(),e}function St(o,n){d(o,n.maxHp),o.u64(n.characterId),l(o,n.position),o.u32(n.transitIndex),d(o,n.curHp),o.u16(n.characterLevel),o.f32(n.gearLevel),o.u32(n.zoneId),o.u8(n.partyMemberNumber),o.string(n.name,20),o.u64(n.zoneInstId),o.u8(n.worldId),o.u16(n.classId),o.u8(n.auths)}function Pa(o,n){let e={};return e.raidInstanceId=o.u32(),e.lootGrade=o.u32(),e.partyType=o.u8(),e.partyInstanceId=o.u32(),e.partyLootType=o.u8(),e.memberDatas=o.array(o.u16(),()=>xt(o,n),40),e}function ba(o,n){o.u32(n.raidInstanceId),o.u32(n.lootGrade),o.u8(n.partyType),o.u32(n.partyInstanceId),o.u8(n.partyLootType),o.array(n.memberDatas,{maxLen:40,lenType:"u16"},e=>{St(o,e)})}var ha="PartyInfo";function Ia(o,n){let e={};return e.partyLeaveType=o.u8(),e.partyInstanceId=o.u32(),e.name=o.string(20),e}function Ea(o,n){o.u8(n.partyLeaveType),o.u32(n.partyInstanceId),o.string(n.name,20)}var Da="PartyLeaveResult";function Ka(o,n){let e={};return e.objectId=o.u64(),e.passiveStatusEffectList=o.array(o.u16(),()=>o.u32(),10),e.unk0_m=o.u8(),e}function Ra(o,n){o.u64(n.objectId),o.array(n.passiveStatusEffectList,{maxLen:10,lenType:"u16"},e=>{o.u32(e)}),o.u8(n.unk0_m)}var wa="PartyPassiveStatusEffectAddNotify";function La(o,n){let e={};return e.objectId=o.u64(),e.passiveStatusEffectList=o.array(o.u16(),()=>o.u32(),10),e}function Aa(o,n){o.u64(n.objectId),o.array(n.passiveStatusEffectList,{maxLen:10,lenType:"u16"},e=>{o.u32(e)})}var Ca="PartyPassiveStatusEffectRemoveNotify";function Ba(o,n){let e={};return e.characterId=o.u64(),e.statusEffectDatas=o.array(o.u16(),()=>v(o,n),80),e.playerIdOnRefresh=o.u64(),e}function Ma(o,n){o.u64(n.characterId),o.array(n.statusEffectDatas,{maxLen:80,lenType:"u16"},e=>{x(o,e)}),o.u64(n.playerIdOnRefresh)}var ja="PartyStatusEffectAddNotify";function Fa(o,n){let e={};return e.characterId=o.u64(),e.statusEffectIds=o.array(o.u16(),()=>o.u32(),80),e.reason=o.u8(),e}function ga(o,n){o.u64(n.characterId),o.array(n.statusEffectIds,{maxLen:80,lenType:"u16"},e=>{o.u32(e)}),o.u8(n.reason)}var Wa="PartyStatusEffectRemoveNotify";function Oa(o,n){let e={};return e.partyInstanceId=o.u32(),e.raidInstanceId=o.u32(),e.characterId=o.u64(),e}function Ua(o,n){o.u32(n.partyInstanceId),o.u32(n.raidInstanceId),o.u64(n.characterId)}var Za="PartyStatusEffectResultNotify";function qa(o,n){let e={};return e.passiveStatusEffectList=o.array(o.u16(),()=>o.u32(),10),e}function Va(o,n){o.array(n.passiveStatusEffectList,{maxLen:10,lenType:"u16"},e=>{o.u32(e)})}var Ha="PassiveStatusEffectAddNotify";function za(o,n){let e={};return e.passiveStatusEffectList=o.array(o.u16(),()=>o.u32(),10),e}function Ga(o,n){o.array(n.passiveStatusEffectList,{maxLen:10,lenType:"u16"},e=>{o.u32(e)})}var Ya="PassiveStatusEffectRemoveNotify";function $a(o,n){let e={};return n>=4?e.typeId=o.u32():e.typeId=0,e}function Ja(o,n){o.u32(n.typeId)}var Qa="RaidBossKillNotify";function Xa(o,n){let e={};return n>=3?e.raidResult=o.u8():e.raidResult=0,e}function ya(o,n){o.u8(n.raidResult)}var nr="RaidResult";function Tt(o,n){let e={};return e.unpublishReason=o.u8(),e.objectId=o.u64(),e}function Nt(o,n){o.u8(n.unpublishReason),o.u64(n.objectId)}function or(o,n){let e={};return e.unpublishedObjects=o.array(o.u16(),()=>Tt(o,n),200),e}function er(o,n){o.array(n.unpublishedObjects,{maxLen:200,lenType:"u16"},e=>{Nt(o,e)})}var _r="RemoveObject";function no(o,n){let e={};return e.modifier=o.u8(),e.targetId=o.u64(),e.damageType=o.u8(),o.bool()&&(e.damageAttr=o.u8()),e.curHp=u(o,n),e.unk3_m=o.u16(),e.maxHp=u(o,n),e.damage=u(o,n),e}function oo(o,n){o.u8(n.modifier),o.u64(n.targetId),o.u8(n.damageType),o.bool(n.damageAttr!==void 0)&&o.u8(n.damageAttr),d(o,n.curHp),o.u16(n.unk3_m),d(o,n.maxHp),d(o,n.damage)}function bt(o,n){let e={};return e.skillMoveOptionData=$n(o,n),e.destination=t(o,n),e.position=t(o,n),e.skillDamageEvent=no(o,n),e}function ht(o,n){et(o,n.skillMoveOptionData),l(o,n.destination),l(o,n.position),oo(o,n.skillDamageEvent)}function ar(o,n){let e={};return e.skillId=o.u32(),e.skillDamageAbnormalMoveEvents=o.array(o.u16(),()=>bt(o,n),50),e.skillEffectId=o.u32(),e.sourceId=o.u64(),e}function rr(o,n){o.u32(n.skillId),o.array(n.skillDamageAbnormalMoveEvents,{maxLen:50,lenType:"u16"},e=>{ht(o,e)}),o.u32(n.skillEffectId),o.u64(n.sourceId)}var ur="SkillDamageAbnormalMoveNotify";function tr(o,n){let e={};return e.skillLevel=o.u8(),e.sourceId=o.u64(),e.skillId=o.u32(),e.skillDamageEvents=o.array(o.u16(),()=>no(o,n),50),e.skillEffectId=o.u32(),e}function sr(o,n){o.u8(n.skillLevel),o.u64(n.sourceId),o.u32(n.skillId),o.array(n.skillDamageEvents,{maxLen:50,lenType:"u16"},e=>{oo(o,e)}),o.u32(n.skillEffectId??0)}var ir="SkillDamageNotify";function mr(o,n){let e={};return e.sourceId=o.u64(),e.skillId=o.u32(),e.stage=o.u8(),e}function dr(o,n){o.u64(n.sourceId),o.u32(n.skillId),o.u8(n.stage)}var fr="SkillStageNotify";function lr(o,n){let e={};return e.sourceId=o.u64(),e.curDirectionYaw=m(o,n),e.newDirectionYaw=m(o,n),e.aimTargetPosition=t(o,n),o.bool()&&(e.pitchRotation=m(o,n)),o.bool()&&(e.aiStateId=o.u32()),e.curPosition=t(o,n),o.bool()&&(e.unk1_m=o.u32()),e.skillLevel=o.u8(),e.newPosition=t(o,n),e.skillId=o.u32(),e.skillOptionData=Qn(o,n),e}function cr(o,n){o.u64(n.sourceId),T(o,n.curDirectionYaw),T(o,n.newDirectionYaw),l(o,n.aimTargetPosition),o.bool(n.pitchRotation!==void 0)&&T(o,n.pitchRotation),o.bool(n.aiStateId!==void 0)&&o.u32(n.aiStateId),l(o,n.curPosition),o.bool(n.unk1_m!==void 0)&&o.u32(n.unk1_m),o.u8(n.skillLevel),l(o,n.newPosition),o.u32(n.skillId),ut(o,n.skillOptionData)}var kr="SkillStartNotify";function pr(o,n){let e={};return e.statusEffectData=v(o,n),e.objectId=o.u64(),e.new=o.bool(),e}function vr(o,n){x(o,n.statusEffectData),o.u64(n.objectId),o.bool(n.new)}var xr="StatusEffectAddNotify";function Sr(o,n){let e={};return e.statusEffectIds=o.array(o.u16(),()=>o.u32(),80),e.objectId=o.u64(),e.reason=o.u8(),e}function Tr(o,n){o.array(n.statusEffectIds,{maxLen:80,lenType:"u16"},e=>{o.u32(e)}),o.u64(n.objectId),o.u8(n.reason)}var Nr="StatusEffectRemoveNotify";function Pr(o,n){let e={};return e.effectInstanceId=o.u32(),e.targetId=o.u64(),e.expirationTick=o.u64(),e}function br(o,n){o.u32(n.effectInstanceId),o.u64(n.targetId),o.u64(n.expirationTick)}var hr="StatusEffectDurationNotify";function Ir(o,n){let e={};return e.objectId=o.u64(),e.effectInstanceId=o.u32(),e.characterId=o.u64(),e.value=o.u32(),e}function Er(o,n){o.u64(n.objectId),o.u32(n.effectInstanceId),o.u64(n.characterId),o.u32(n.value)}var Dr="StatusEffectSyncDataNotify";function Kr(o,n){let e={};return e.step=o.u32(),e.unk2_m=o.bool(),e.triggerId=o.u32(),e}function Rr(o,n){o.u32(n.step),o.bool(n.unk2_m),o.u32(n.triggerId)}var wr="TriggerBossBattleStatus";function Lr(o,n){let e={};return e.packetResultCode=o.u32(),e.triggerId=o.u32(),e.unk0_m=o.u32(),e.involvedPCs=o.array(o.u16(),()=>o.u64(),40),e}function Ar(o,n){o.u32(n.packetResultCode),o.u32(n.triggerId),o.u32(n.unk0_m),o.array(n.involvedPCs,{maxLen:40,lenType:"u16"},e=>{o.u64(e)})}var Cr="TriggerFinishNotify";function Br(o,n){let e={};return e.triggerId=o.u32(),e.triggerSignalType=o.u32(),e.sourceId=o.u64(),e.involvedPCs=o.array(o.u16(),()=>o.u64(),40),e}function Mr(o,n){o.u32(n.triggerId),o.u32(n.triggerSignalType),o.u64(n.sourceId),o.array(n.involvedPCs,{maxLen:40,lenType:"u16"},e=>{o.u64(e)})}var jr="TriggerStartNotify";function Fr(o,n){let e={};return e.maxHp=u(o,n),e.characterId=o.u64(),e.unk0_m=o.u32(),e.statusEffectDatas=o.array(o.u16(),()=>v(o,n),80),e.position=o.u64(),e.curHp=u(o,n),e}function gr(o,n){d(o,n.maxHp),o.u64(n.characterId),o.u32(n.unk0_m),o.array(n.statusEffectDatas,{maxLen:80,lenType:"u16"},e=>{x(o,e)}),o.u64(n.position),d(o,n.curHp)}var Wr="TroopMemberUpdateMinNotify";function Or(o,n){let e={};return e.identityGauge1=o.u32(),e.identityGauge2=o.u32(),e.identityGauge3=o.u32(),e.playerId=o.u64(),e}function Ur(o,n){o.u32(n.identityGauge1),o.u32(n.identityGauge2),o.u32(n.identityGauge3),o.u64(n.playerId)}var Zr="IdentityGaugeChangeNotify";function qr(o,n){let e={};return e.objectId=o.u64(),e}function Vr(o,n){o.u64(n.objectId)}var Hr="ZoneObjectUnpublishNotify";function It(o,n){let e={};return e.stackCount=o.u8(),e.target=o.u8(),e.id=o.u32(),e}function Et(o,n){o.u8(n.stackCount),o.u8(n.target),o.u32(n.id)}function zr(o,n){let e={};return e.zoneStatusEffectDataList=o.array(o.u16(),()=>It(o,n),4),e}function Gr(o,n){o.array(n.zoneStatusEffectDataList,{maxLen:4,lenType:"u16"},e=>{Et(o,e)})}var Yr="ZoneStatusEffectAddNotify";function $r(o,n){let e={};return e.statusEffectId=o.u32(),e}function Jr(o,n){o.u32(n.statusEffectId)}var Qr="ZoneStatusEffectRemoveNotify";function Xr(o,n){let e={};return e.skillLevel=o.u8(),e.caster=o.u64(),e.skillId=o.u32(),e}function yr(o,n){o.u8(n.skillLevel),o.u64(n.caster),o.u32(n.skillId)}var nu="SkillCastNotify";function ou(o,n){let e={};return e.objectId=o.u64(),e.stance=o.u8(),e}function eu(o,n){o.u64(n.objectId),o.u8(n.stance)}var _u="IdentityStanceChangeNotify";function au(o,n){let e={};return e.objectId=o.u64(),e.equipItemDataList=o.array(o.u16(),()=>K(o,n),32),e}function ru(o,n){o.u64(n.objectId),o.array(n.equipItemDataList,{maxLen:32,lenType:"u16"},e=>{R(o,e)})}var uu="EquipChangeNotify";function tu(o,n){let e={};return e.objectId=o.u64(),e.equipLifeToolDataList=o.array(o.u16(),()=>K(o,n),9),e}function su(o,n){o.u64(n.objectId),o.array(n.equipLifeToolDataList,{maxLen:9,lenType:"u16"},e=>{R(o,e)})}var iu="EquipLifeToolChangeNotify";function Dt(o,n){let e={};return o.bool()&&(e.serialNumber=o.u64(),e.id=o.u32(),e.level=o.u16(),e.slot=o.u16(),e.durability=o.u32(),e.unk1_6_m=o.u32(),e.flag=o.u32(),e.expireTime=c(o),e.lockUpdateTime=c(o)),e}function Kt(o,n){o.bool(n.slot!==void 0)&&(o.u64(n.serialNumber),o.u32(n.id),o.u16(n.level),o.u16(n.slot),o.u32(n.durability),o.u32(n.unk1_6_m),o.u32(n.flag),h(o,n.expireTime),h(o,n.lockUpdateTime))}function mu(o,n){let e={};return e.itemDataList=o.array(o.u16(),()=>Dt(o,n),80),e.storageType=o.u8(),e}function du(o,n){o.array([1,20].includes(n.storageType)?n.itemDataList:[],{maxLen:80,lenType:"u16"},e=>{Kt(o,e)}),o.u8(n.storageType)}var fu="InitItem";function Rt(o,n){let e={};return e.npcId=o.u32(),e.isDead=o.bool(),e}function wt(o,n){o.u32(n.npcId),o.bool(n.isDead)}function lu(o,n){let e={};return e.raidResult=o.u8(),e.raidId=o.u32(),e.totalTime=o.u64(),e.bossKillDataList=o.array(o.u16(),()=>Rt(o,n),3),e.endTick=o.u64(),e.startTick=o.u64(),e}function cu(o,n){o.u8(n.raidResult),o.u32(n.raidId),o.u64(n.totalTime),o.array(n.bossKillDataList,{maxLen:3,lenType:"u16"},e=>{wt(o,e)}),o.u64(n.endTick),o.u64(n.startTick)}var ku="RaidBegin";function pu(o,n){let e={};return e.zoneInstId=o.u64(),e.zoneId=o.u32(),e.loadComplete=o.bool(),e.completeMembers=o.array(o.u16(),()=>o.u64(),40),e.totalMembers=o.array(o.u16(),()=>o.u64(),40),e.firstPCEnterTick=o.u64(),e.zoneLevel=o.u8(),e}function vu(o,n){o.u64(n.zoneInstId),o.u32(n.zoneId),o.bool(n.loadComplete),o.array(n.completeMembers,{maxLen:40,lenType:"u16"},e=>{o.u64(e)}),o.array(n.totalMembers,{maxLen:40,lenType:"u16"},e=>{o.u64(e)}),o.u64(n.firstPCEnterTick),o.u8(n.zoneLevel)}var xu="ZoneMemberLoadStatusNotify";function Lt(o,n){let e={};return e.position=t(o),e.objectId=o.u64(),e.ownerId=o.u64(),e.skillId=o.u32(),e.skillEffect=o.u32(),e}function At(o,n){l(o,n.position),o.u64(n.objectId),o.u64(n.ownerId),o.u32(n.skillId),o.u32(n.skillEffect)}function Su(o,n){let e={};return e.trapData=Lt(o,n),e}function Tu(o,n){At(o,n.trapData)}var Nu="NewTrap";function Pu(o,n){let e={};return e.skillId=o.u32(),e.caster=o.u64(),e.newDirectionYaw=m(o),e.cancelReason=o.u8(),e.newPosition=t(o),e}function bu(o,n){o.u32(n.skillId),o.u64(n.caster),T(o,n.newDirectionYaw),o.u8(n.cancelReason),l(o,n.newPosition)}var hu="SkillCancelNotify";function Iu(o,n){let e={};return e.players=o.array(o.u8(),()=>{let _={};return _.name=o.string(20),_.stats=o.array(o.u8(),()=>{let r={};return r.id=o.u8(),r.value=o.u32(),r},100),n>=4&&(_.elixirs=o.array(o.u8(),()=>{let r={};return r.slot=o.u8(),r.entries=o.array(o.u8(),()=>{let s={};return s.level=o.u8(),s.id=o.u32(),s}),r},32)),n>=5&&(_.gems=o.array(o.u8(),()=>{let r={};r.id=o.u32(),r.skillId=o.u32(),r.type=o.u8(),r.value=o.u16()})),_},24),e}function Eu(o,n){o.array(n.players,{maxLen:24,lenType:"u8"},e=>{o.string(e.name,20),o.array(e.stats,{maxLen:100,lenType:"u8"},_=>{o.u8(_.id),o.u32(_.value)}),o.array(e.elixirs,{maxLen:32,lenType:"u8"},_=>{o.u8(_.slot),o.array(_.entries,{maxLen:5,lenType:"u8"},r=>{o.u8(r.level),o.u32(r.id)})}),o.array(e.gems,{maxLen:20,lenType:"u8"},_=>{o.u32(_.id),o.u32(_.skillId),o.u8(_.type),o.u16(_.value)})})}var Du="APP_StatApi";var Ku=new Map([[101,[I_,b_,h_]],[0,[R_,D_,K_]],[1,[A_,w_,L_]],[2,[M_,C_,B_]],[4,[g_,j_,F_]],[5,[U_,W_,O_]],[6,[V_,Z_,q_]],[7,[G_,H_,z_]],[8,[J_,Y_,$_]],[9,[y_,Q_,X_]],[10,[ea,na,oa]],[11,[ra,_a,aa]],[12,[sa,ua,ta]],[13,[da,ia,ma]],[14,[ka,la,ca]],[15,[xa,pa,va]],[16,[Na,Sa,Ta]],[17,[ha,Pa,ba]],[18,[Da,Ia,Ea]],[19,[wa,Ka,Ra]],[20,[Ca,La,Aa]],[21,[ja,Ba,Ma]],[22,[Wa,Fa,ga]],[23,[Za,Oa,Ua]],[24,[Ha,qa,Va]],[25,[Ya,za,Ga]],[26,[Qa,$a,Ja]],[27,[nr,Xa,ya]],[28,[_r,or,er]],[29,[ur,ar,rr]],[30,[ir,tr,sr]],[31,[fr,mr,dr]],[32,[kr,lr,cr]],[34,[xr,pr,vr]],[35,[Nr,Sr,Tr]],[36,[hr,Pr,br]],[37,[Dr,Ir,Er]],[38,[wr,Kr,Rr]],[39,[Cr,Lr,Ar]],[40,[jr,Br,Mr]],[41,[Wr,Fr,gr]],[42,[Zr,Or,Ur]],[43,[Hr,qr,Vr]],[44,[Yr,zr,Gr]],[45,[Qr,$r,Jr]],[46,[nu,Xr,yr]],[47,[_u,ou,eu]],[48,[uu,au,ru]],[49,[iu,tu,su]],[50,[fu,mu,du]],[52,[ku,lu,cu]],[51,[xu,pu,vu]],[53,[Nu,Su,Tu]],[54,[hu,Pu,bu]],[6e4,[Du,Iu,Eu]]]);var Cs=require("tiny-typed-emitter");var eo=class{#o;#n;#e;#_;#a;#r;constructor(n,e,_,r,s,i){this.#o=n,this.#n=e,this.#e=_,this.#_=r,this.#a=s,this.#r=i}#u;get parsed(){if(!this.#u)try{this.#u=this.#r(this.#a.decrypt(this.#o,this.#n,this.#e,this.#_))}catch(n){console.error(`[meter-core/pkt-stream] - ${n}`);return}return this.#u}};var Wn=class{time;#o;#n;#e;#_;constructor(...n){if(n.length===5){let[e,_,r,s,i]=n;this.#n=e,this.time=r,this.#o=_,this.#e=s,this.#_=i}else if(n.length===3){let[e,_,r]=n;this.#n=Buffer.alloc(0),this.time=new Date,this.#o=_,this.#e=()=>e,this.#_=r}else throw new Error("[meter-core/logger/parser] - LogEvent<T>: Invalid constructor arguments")}#a;get parsed(){if(!this.#a)try{this.#a=this.#e(new a(this.#n))}catch(n){console.error(`[meter-core/logger/parser] - parsed - ${n}`);return}return this.#a}#r;get serialized(){if(!this.#r)try{if(!this.parsed)return;let n=new qn;n.skip(wu),this.#_(n,this.parsed);let e=n.value;e.writeUint16LE(e.length,Bt),e.writeUint16LE(this.#o,ao),e.writeUintLE(+new Date,Ru,ro),this.#r=n.value}catch(n){console.error(`[meter-core/logger/parser] - serialized - ${n}`);return}return this.#r}},On=6,Ct=2,Bt=0,_o=2,ao=Bt+Ct,ro=6,Ru=ao+_o,wu=Ct+_o+ro;var Ft=require("fs");var uo=class{buffer;position;out;constructor(){this.buffer=null,this.position=0,this.out=[]}write(n){for(;n.length>0;){if(this.buffer){if(this.buffer.length<2){let r=this.buffer[0],s=(n[0]<<8)+r;this.buffer=Buffer.alloc(s),this.buffer[0]=r,this.position=1}let _=Math.min(n.length,this.buffer.length-this.position);n.copy(this.buffer,this.position,0,_),this.position+=_,this.position===this.buffer.length&&(this.out.push(this.buffer),this.buffer=null,this.position=0),n=n.subarray(_);continue}if(n.length<2){this.buffer=Buffer.from(n),this.position=n.length;break}let e=n.readUInt16LE(0);if(e===0){this.buffer=null;return}if(e>n.length){this.buffer=Buffer.alloc(e),n.copy(this.buffer),this.position=n.length;break}this.out.push(n.subarray(0,e)),n=n.subarray(e)}}read(){return this.out.shift()}};var gt=require("fs");var Un=class extends jt.TypedEmitter{},Lu=class extends Un{#o;#n;constructor(n,e,_){super(),this.#o=e,_&&(this.#n=(0,Ft.createWriteStream)(_,{highWaterMark:0}));let r=Buffer.allocUnsafe(On);r.writeUIntLE(5,0,On),this.#n?.write(r),n.on("*",this.handlePkt.bind(this))}handlePkt(n,e,_,r){try{let s=P_.get(e),i=mt.get(e);if(s&&i){let[S]=i,[w,b]=s,F=Ku.get(S);if(F){let[Zn,Ms,Wt]=F,Cu=new eo(Buffer.from(n),e,_,!!r,this.#o,b).parsed;if(!Cu)return;let to=new Wn(Cu,S,Wt);this.emit(Zn,to),this.emit("*",Zn,to),this.appendLog(to)}}}catch(s){console.error(s)}}appendLog(n){this.#n&&n.serialized&&this.#n.write(n.serialized)}},Au=class extends Un{readLogByChunk(n){let e=new uo,_=(0,gt.createReadStream)(n),r=!1,s;_.on("data",i=>{if(s===void 0){if(s=this.readVersion(i),s>5){_.destroy();return}i=i.subarray(On)}e.write(i);let S;for(;S=e.read();)this.readLogChunk(S,s)}).on("end",()=>{r=!0,this.emit("fileEnd","end")}).on("close",()=>{r||this.emit("fileEnd","closed")})}readLogChunk(n,e){try{if(n.length<8)return!1;let _=n.readUIntLE(ao,_o),r=new Date(n.readUintLE(Ru,ro)),s=n.subarray(wu),i=Ku.get(_);if(i){let[S,w,b]=i,F=new Wn(s,_,new Date(r),Zn=>w(Zn,e),b);this.emit(S,F),this.emit("*",S,F)}}catch(_){console.error(_)}}readVersion(n){return n.readUintLE(0,On)}};0&&(module.exports={LiveLogger,Logger,ReplayLogger});
