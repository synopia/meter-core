import{a as $a}from"./chunk-ZGEJ7KGT.mjs";import{$ as Oo,A as No,B as bo,C as So,D as go,E as xo,F as Eo,G as Io,H as Po,I as vo,J as To,K as Do,L as ko,M as Ro,N as Lo,O as Ao,P as ho,Q as Co,R as Ko,S as Wo,T as wo,U as Mo,V as Bo,W as jo,X as Fo,Y as Zo,Z as qo,_ as _o,a as Ja,aa as Uo,b as Qa,ba as zo,c as Xa,ca as Vo,d as to,da as Ho,e as eo,ea as Go,f as ao,fa as Yo,g as oo,ga as $o,h as io,ha as Jo,i as no,ia as Qo,j as N,ja as Xo,k as b,ka as ti,l as ro,la as ei,m as so,ma as ai,n as fo,na as oi,o as uo,oa as ii,p as mo,pa as ni,q as n,qa as ri,r,ra as si,s as po,sa as fi,t as yo,u as co,ua as ui,v as lo,w as c,x as l,y as f,z as u}from"./chunk-FPH6ZIXE.mjs";import{TypedEmitter as tn}from"tiny-typed-emitter";var mi=new Map([[Xa,[101]],[to,[0]],[eo,[1]],[ao,[2]],[oo,[4]],[io,[5]],[no,[6]],[uo,[7]],[mo,[8]],[po,[9]],[co,[10]],[lo,[11]],[No,[12]],[bo,[13]],[So,[14]],[Po,[15]],[To,[16]],[Do,[17]],[ko,[18]],[Ro,[19]],[Lo,[20]],[Ao,[21]],[ho,[22]],[Co,[23]],[Ko,[24]],[Wo,[25]],[Mo,[26]],[Bo,[27]],[jo,[28]],[Oo,[29]],[Uo,[30]],[zo,[31]],[Go,[32]],[Yo,[34]],[$o,[35]],[Jo,[36]],[Qo,[37]],[Xo,[38]],[ti,[39]],[ei,[40]],[ai,[41]],[oi,[42]],[ni,[43]],[ri,[44]],[si,[45]],[Zo,[46]],[fo,[47]],[ro,[48]],[so,[49]],[yo,[50]],[wo,[52]],[ii,[51]],[vo,[53]],[Fo,[54]]]);function F(t,a){let e={};return e.cooldown1=t.f32(),e.cooldown2=t.f32(),e.skillId=t.u32(),e}function Z(t,a){t.f32(a.cooldown1),t.f32(a.cooldown2),t.u32(a.skillId)}var q="SkillCooldownNotify";function E(t,a){let e={};return e.points=t.u16(),e.id=t.u32(),e.level=t.u8(),e}function I(t,a){t.u16(a.points),t.u32(a.id),t.u8(a.level)}function O(t,a){let e={};return e.abilityDataList=t.array(t.u16(),()=>E(t,a),100),e}function U(t,a){t.array(a.abilityDataList,{maxLen:100,lenType:"u16"},e=>{I(t,e)})}var z="AbilityChangeNotify";function pi(t,a){let e={};return e.featureType=t.u16(),e.level=t.u32(),e}function yi(t,a){t.u16(a.featureType),t.u32(a.level)}function V(t,a){let e={};return e.activeAbilityList=t.array(t.u16(),()=>pi(t,a),60),e.objectId=t.u64(),e}function H(t,a){t.array(a.activeAbilityList,{maxLen:60,lenType:"u16"},e=>{yi(t,e)}),t.u64(a.objectId)}var G="ActiveAbilityNotify";function Y(t,a){let e={};return e.objectId=t.u64(),e.addonSkillFeatureList=t.array(t.u16(),()=>{let o={};return o.addonSkillFeatureIdList=t.array(t.u16(),()=>t.u32(),5),o.skillId=t.u32(),o},200),e}function $(t,a){t.u64(a.objectId),t.array(a.addonSkillFeatureList,{maxLen:200,lenType:"u16"},e=>{t.array(e.addonSkillFeatureIdList,{maxLen:5,lenType:"u16"},o=>{t.u32(o)}),t.u32(e.skillId)})}var J="AddonSkillFeatureChangeNotify";function Q(t,a){let e={};return e.paralyzationMaxPoint=t.u32(),e.type=t.u8(),e.objectId=t.u64(),e.paralyzationPoint=t.u32(),e}function X(t,a){t.u32(a.paralyzationMaxPoint),t.u8(a.type),t.u64(a.objectId),t.u32(a.paralyzationPoint)}var tt="BlockSkillStateNotify";function et(t,a){let e={};return e.sourceId=t.u64(),e.targetId=t.u64(),e.type=t.u32(),e}function at(t,a){t.u64(a.sourceId),t.u64(a.targetId),t.u32(a.type)}var ot="CounterAttackNotify";function it(t,a){let e={};return e.sourceId=t.u64(),e.targetId=t.u64(),a>=4?(e.effectId=t.u32(),e.directionYaw=t.u16(),e.deathType=t.u8(),e.durabilityDecrement=t.u8(),e.abnormalStatusType=t.u8(),e.damageAttr=t.u8(),e.unk0_m=t.u64(),e.unk2_m=t.u32()):(e.effectId=0,e.directionYaw=0,e.deathType=0,e.durabilityDecrement=0,e.abnormalStatusType=0,e.damageAttr=0,e.unk0_m=0n,e.unk2_m=0),e}function nt(t,a){t.u64(a.sourceId),t.u64(a.targetId),t.u32(a.effectId),t.u16(a.directionYaw),t.u8(a.deathType??0),t.u8(a.durabilityDecrement),t.u8(a.abnormalStatusType??0),t.u8(a.damageAttr??0),t.u64(a.unk0_m),t.u32(a.unk2_m)}var rt="DeathNotify";function st(t,a){let e={};return e.abilityDataList=t.array(t.u16(),()=>E(t,a),100),e}function ft(t,a){t.array(a.abilityDataList,{maxLen:100,lenType:"u16"},e=>{I(t,e)})}var ut="InitAbility";function mt(t,a){let e={};return e.playerId=t.u64(),e}function pt(t,a){t.u64(a.playerId)}var yt="InitEnv";function m(t,a){let e={};return e.skillLevel=t.u8(),e.occurTime=N(t,a),e.statusEffectId=t.u32(),e.sourceId=t.u64(),e.totalTime=t.f32(),e.endTick=t.u64(),t.bool()&&(e.value=t.bytes(16)),e.effectInstanceId=t.u32(),a>=1?e.stackCount=t.u8():e.stackCount=1,e}function p(t,a){t.u8(a.skillLevel),b(t,a.occurTime),t.u32(a.statusEffectId),t.u64(a.sourceId),t.f32(a.totalTime),t.u64(a.endTick),t.bool(a.value!==void 0)&&t.bytes(a.value,{length:16}),t.u32(a.effectInstanceId),t.u8(a.stackCount)}function ct(t,a){let e={};return e.statPair=t.array(t.u16(),()=>{let o={};return o.StatType=t.u8(),o.Value=n(t,a),o},152),e.name=t.string(20),e.level=t.u16(),e.statusEffectDatas=t.array(t.u16(),()=>m(t,a),80),e.characterId=t.u64(),e.gearLevel=t.f32(),e.playerId=t.u64(),e.classId=t.u16(),e}function lt(t,a){t.array(a.statPair,{maxLen:152,lenType:"u16"},e=>{t.u8(e.statType),r(t,e.value)}),t.string(a.name,20),t.u16(a.level),t.array(a.statusEffectDatas,{maxLen:80,lenType:"u16"},e=>{p(t,e)}),t.u64(a.characterId),t.f32(a.gearLevel),t.u64(a.playerId),t.u16(a.classId)}var dt="InitPC";function Nt(t,a){let e={};return e.statPair=t.array(t.u16(),()=>{let o={};return o.statType=t.u8(),o.value=n(t,a),o},152),e.statusEffectDatas=t.array(t.u16(),()=>m(t,a),80),e.addonSkillFeatureList=t.array(t.u16(),()=>{let o={};return o.addonSkillFeatureIdList=t.array(t.u16(),()=>t.u32(),5),o.skillId=t.u32(),o},200),e.abilityDataList=t.array(t.u16(),()=>E(t,a),100),e}function bt(t,a){t.array(a.statPair,{maxLen:152,lenType:"u16"},e=>{t.u8(e.statType),r(t,e.value)}),t.array(a.statusEffectDatas,{maxLen:80,lenType:"u16"},e=>{p(t,e)}),t.array(a.addonSkillFeatureList,{maxLen:200,lenType:"u16"},e=>{t.array(e.addonSkillFeatureIdList,{maxLen:5,lenType:"u16"},o=>{t.u32(o)}),t.u32(e.skillId)}),t.array(a.abilityDataList,{maxLen:100,lenType:"u16"},e=>{I(t,e)})}var St="InitLocal";function gt(t,a){let e={};return e.account_CharacterId1=t.u64(),e.serverAddr=t.string(256),e.account_CharacterId2=t.u64(),e}function xt(t,a){t.u64(a.account_CharacterId1),t.string(a.serverAddr,256),t.u64(a.account_CharacterId2)}var Et="MigrationExecute";function L(t,a){let e={};return e.spawnIndex=t.u32(),e.objectId=t.u64(),t.bool()&&(e.transitIndex=t.u32()),e.position=f(t,a),e.statusEffectDatas=t.array(t.u16(),()=>m(t,a),80),e.directionYaw=c(t,a),e.statPair=t.array(t.u16(),()=>{let o={};return o.statType=t.u8(),o.value=n(t,a),o},152),e.typeId=t.u32(),a>=1?(e.level=t.u16(),t.bool()&&(e.balanceLevel=t.u16())):e.level=0,e}function A(t,a){t.u32(a.spawnIndex),t.u64(a.objectId),t.bool(a.transitIndex!==void 0)&&t.u32(a.transitIndex),u(t,a.position),t.array(a.statusEffectDatas,{maxLen:80,lenType:"u16"},e=>{p(t,e)}),l(t,a.directionYaw),t.array(a.statPair,{maxLen:152,lenType:"u16"},e=>{t.u8(e.statType),r(t,e.value)}),t.u32(a.typeId),t.u16(a.level),t.bool(a.balanceLevel!==void 0)&&t.u16(a.balanceLevel)}function Pt(t,a){let e={};return e.npcStruct=L(t,a),e}function vt(t,a){A(t,a.npcStruct)}var Tt="NewNpc";function Dt(t,a){let e={};return e.publishReason=t.u8(),e.ownerId=t.u64(),e.npcData=L(t,a),e}function kt(t,a){t.u8(a.publishReason),t.u64(a.ownerId),A(t,a.npcData)}var Rt="NewNpcSummon";function g(t,a){let e={};return e.slot=t.u16(),e.level=t.u16(),e.itemTint=t.bytes(t.u16(),3,14),e.expireTime=N(t),e.id=t.u32(),e}function x(t,a){t.u16(a.slot),t.u16(a.level),t.bytes(a.itemTint,{maxLen:3,lenType:"u16",multiplier:14}),b(t,a.expireTime),t.u32(a.id)}function di(t,a){let e={};return e.maxItemLevel=t.f32(),e.statPair=t.array(t.u16(),()=>{let o={};return o.statType=t.u8(),o.value=n(t,a),o},152),e.name=t.string(20),e.heading=c(t,a),e.characterId=t.u64(),e.playerId=t.u64(),e.addonSkillFeatureList=t.array(t.u16(),()=>{let o={};return o.addonSkillFeatureIdList=t.array(t.u16(),()=>t.u32(),5),o.skillId=t.u32(),o},200),e.classId=t.u16(),e.level=t.u16(),e.statusEffectDatas=t.array(t.u16(),()=>m(t,a),80),a>=1?(e.avgItemLevel=t.f32(),e.position=f(t),e.equipItemDataList=t.array(t.u16(),()=>g(t,a),32),e.equipLifeToolDataList=t.array(t.u16(),()=>g(t,a),9),e.guildName=t.string(20),a>=2?e.guildId=t.u64():e.guildId=BigInt(t.u32())):(e.avgItemLevel=e.maxItemLevel,e.position={x:0,y:0,z:0},e.equipItemDataList=[],e.equipLifeToolDataList=[],e.guildName="",e.guildId=0n),e}function Ni(t,a){t.f32(a.maxItemLevel),t.array(a.statPair,{maxLen:152,lenType:"u16"},e=>{t.u8(e.statType),r(t,e.value)}),t.string(a.name,20),l(t,a.heading),t.u64(a.characterId),t.u64(a.playerId),t.array(a.addonSkillFeatureList,{maxLen:200,lenType:"u16"},e=>{t.array(e.addonSkillFeatureIdList,{maxLen:5,lenType:"u16"},o=>{t.u32(o)}),t.u32(e.skillId)}),t.u16(a.classId),t.u16(a.level),t.array(a.statusEffectDatas,{maxLen:80,lenType:"u16"},e=>{p(t,e)}),t.f32(a.avgItemLevel),u(t,a.position),t.array(a.equipItemDataList,{maxLen:32,lenType:"u16"},e=>{x(t,e)}),t.array(a.equipLifeToolDataList,{maxLen:9,lenType:"u16"},e=>{x(t,e)}),t.string(a.guildName,20),t.u64(a.guildId)}function At(t,a){let e={};return e.pcStruct=di(t,a),e}function ht(t,a){Ni(t,a.pcStruct)}var Ct="NewPC";function bi(t,a){let e={};return e.tripodIndex=go(t,a),e.chainSkillEffect=t.u32(),e.skillEffect=t.u32(),e.skillId=t.u32(),e.targetObjectId=t.u64(),e.ownerId=t.u64(),e.skillLevel=t.u8(),e.projectileId=t.u64(),e.tripodLevel=Eo(t,a),e}function Si(t,a){xo(t,a.tripodIndex),t.u32(a.chainSkillEffect),t.u32(a.skillEffect),t.u32(a.skillId),t.u64(a.targetObjectId),t.u64(a.ownerId),t.u8(a.skillLevel),t.u64(a.projectileId),Io(t,a.tripodLevel)}function Kt(t,a){let e={};return e.projectileInfo=bi(t,a),e}function Wt(t,a){Si(t,a.projectileInfo)}var wt="NewProjectile";function Mt(t,a){let e={};return e.enable=t.bool(),e.paralyzationPoint=t.u32(),e.decreasePoint=t.u32(),e.paralyzationMaxPoint=t.u32(),e.noHitCheckTime=t.u32(),e.hitCheckTime=t.u32(),e.objectId=t.u64(),e}function Bt(t,a){t.bool(a.enable),t.u32(a.paralyzationPoint),t.u32(a.decreasePoint),t.u32(a.paralyzationMaxPoint),t.u32(a.noHitCheckTime),t.u32(a.hitCheckTime),t.u64(a.objectId)}var jt="ParalyzationStateNotify";function gi(t,a){let e={};return e.maxHp=n(t,a),e.characterId=t.u64(),e.position=f(t,a),e.transitIndex=t.u32(),e.curHp=n(t,a),e.characterLevel=t.u16(),e.gearLevel=t.f32(),e.zoneId=t.u32(),e.partyMemberNumber=t.u8(),e.name=t.string(20),e.zoneInstId=t.u64(),e.worldId=t.u8(),e.classId=t.u16(),e.auths=t.u8(),e}function xi(t,a){r(t,a.maxHp),t.u64(a.characterId),u(t,a.position),t.u32(a.transitIndex),r(t,a.curHp),t.u16(a.characterLevel),t.f32(a.gearLevel),t.u32(a.zoneId),t.u8(a.partyMemberNumber),t.string(a.name,20),t.u64(a.zoneInstId),t.u8(a.worldId),t.u16(a.classId),t.u8(a.auths)}function Ft(t,a){let e={};return e.raidInstanceId=t.u32(),e.lootGrade=t.u32(),e.partyType=t.u8(),e.partyInstanceId=t.u32(),e.partyLootType=t.u8(),e.memberDatas=t.array(t.u16(),()=>gi(t,a),40),e}function Zt(t,a){t.u32(a.raidInstanceId),t.u32(a.lootGrade),t.u8(a.partyType),t.u32(a.partyInstanceId),t.u8(a.partyLootType),t.array(a.memberDatas,{maxLen:40,lenType:"u16"},e=>{xi(t,e)})}var qt="PartyInfo";function _t(t,a){let e={};return e.partyLeaveType=t.u8(),e.partyInstanceId=t.u32(),e.name=t.string(20),e}function Ot(t,a){t.u8(a.partyLeaveType),t.u32(a.partyInstanceId),t.string(a.name,20)}var Ut="PartyLeaveResult";function zt(t,a){let e={};return e.objectId=t.u64(),e.passiveStatusEffectList=t.array(t.u16(),()=>t.u32(),10),e.unk0_m=t.u8(),e}function Vt(t,a){t.u64(a.objectId),t.array(a.passiveStatusEffectList,{maxLen:10,lenType:"u16"},e=>{t.u32(e)}),t.u8(a.unk0_m)}var Ht="PartyPassiveStatusEffectAddNotify";function Gt(t,a){let e={};return e.objectId=t.u64(),e.passiveStatusEffectList=t.array(t.u16(),()=>t.u32(),10),e}function Yt(t,a){t.u64(a.objectId),t.array(a.passiveStatusEffectList,{maxLen:10,lenType:"u16"},e=>{t.u32(e)})}var $t="PartyPassiveStatusEffectRemoveNotify";function Jt(t,a){let e={};return e.characterId=t.u64(),e.statusEffectDatas=t.array(t.u16(),()=>m(t,a),80),e.playerIdOnRefresh=t.u64(),e}function Qt(t,a){t.u64(a.characterId),t.array(a.statusEffectDatas,{maxLen:80,lenType:"u16"},e=>{p(t,e)}),t.u64(a.playerIdOnRefresh)}var Xt="PartyStatusEffectAddNotify";function te(t,a){let e={};return e.characterId=t.u64(),e.statusEffectIds=t.array(t.u16(),()=>t.u32(),80),e.reason=t.u8(),e}function ee(t,a){t.u64(a.characterId),t.array(a.statusEffectIds,{maxLen:80,lenType:"u16"},e=>{t.u32(e)}),t.u8(a.reason)}var ae="PartyStatusEffectRemoveNotify";function oe(t,a){let e={};return e.partyInstanceId=t.u32(),e.raidInstanceId=t.u32(),e.characterId=t.u64(),e}function ie(t,a){t.u32(a.partyInstanceId),t.u32(a.raidInstanceId),t.u64(a.characterId)}var ne="PartyStatusEffectResultNotify";function re(t,a){let e={};return e.passiveStatusEffectList=t.array(t.u16(),()=>t.u32(),10),e}function se(t,a){t.array(a.passiveStatusEffectList,{maxLen:10,lenType:"u16"},e=>{t.u32(e)})}var fe="PassiveStatusEffectAddNotify";function ue(t,a){let e={};return e.passiveStatusEffectList=t.array(t.u16(),()=>t.u32(),10),e}function me(t,a){t.array(a.passiveStatusEffectList,{maxLen:10,lenType:"u16"},e=>{t.u32(e)})}var pe="PassiveStatusEffectRemoveNotify";function ye(t,a){let e={};return a>=4?e.typeId=t.u32():e.typeId=0,e}function ce(t,a){t.u32(a.typeId)}var le="RaidBossKillNotify";function de(t,a){let e={};return a>=3?e.raidResult=t.u8():e.raidResult=0,e}function Ne(t,a){t.u8(a.raidResult)}var be="RaidResult";function Ei(t,a){let e={};return e.unpublishReason=t.u8(),e.objectId=t.u64(),e}function Ii(t,a){t.u8(a.unpublishReason),t.u64(a.objectId)}function Se(t,a){let e={};return e.unpublishedObjects=t.array(t.u16(),()=>Ei(t,a),200),e}function ge(t,a){t.array(a.unpublishedObjects,{maxLen:200,lenType:"u16"},e=>{Ii(t,e)})}var xe="RemoveObject";function h(t,a){let e={};return e.modifier=t.u8(),e.targetId=t.u64(),e.damageType=t.u8(),t.bool()&&(e.damageAttr=t.u8()),e.curHp=n(t,a),e.unk3_m=t.u16(),e.maxHp=n(t,a),e.damage=n(t,a),e}function C(t,a){t.u8(a.modifier),t.u64(a.targetId),t.u8(a.damageType),t.bool(a.damageAttr!==void 0)&&t.u8(a.damageAttr),r(t,a.curHp),t.u16(a.unk3_m),r(t,a.maxHp),r(t,a.damage)}function vi(t,a){let e={};return e.skillMoveOptionData=qo(t,a),e.destination=f(t,a),e.position=f(t,a),e.skillDamageEvent=h(t,a),e}function Ti(t,a){_o(t,a.skillMoveOptionData),u(t,a.destination),u(t,a.position),C(t,a.skillDamageEvent)}function Ee(t,a){let e={};return e.skillId=t.u32(),e.skillDamageAbnormalMoveEvents=t.array(t.u16(),()=>vi(t,a),50),e.skillEffectId=t.u32(),e.sourceId=t.u64(),e}function Ie(t,a){t.u32(a.skillId),t.array(a.skillDamageAbnormalMoveEvents,{maxLen:50,lenType:"u16"},e=>{Ti(t,e)}),t.u32(a.skillEffectId),t.u64(a.sourceId)}var Pe="SkillDamageAbnormalMoveNotify";function ve(t,a){let e={};return e.skillLevel=t.u8(),e.sourceId=t.u64(),e.skillId=t.u32(),e.skillDamageEvents=t.array(t.u16(),()=>h(t,a),50),e.skillEffectId=t.u32(),e}function Te(t,a){t.u8(a.skillLevel),t.u64(a.sourceId),t.u32(a.skillId),t.array(a.skillDamageEvents,{maxLen:50,lenType:"u16"},e=>{C(t,e)}),t.u32(a.skillEffectId??0)}var De="SkillDamageNotify";function ke(t,a){let e={};return e.sourceId=t.u64(),e.skillId=t.u32(),e.stage=t.u8(),e}function Re(t,a){t.u64(a.sourceId),t.u32(a.skillId),t.u8(a.stage)}var Le="SkillStageNotify";function Ae(t,a){let e={};return e.sourceId=t.u64(),e.curDirectionYaw=c(t,a),e.newDirectionYaw=c(t,a),e.aimTargetPosition=f(t,a),t.bool()&&(e.pitchRotation=c(t,a)),t.bool()&&(e.aiStateId=t.u32()),e.curPosition=f(t,a),t.bool()&&(e.unk1_m=t.u32()),e.skillLevel=t.u8(),e.newPosition=f(t,a),e.skillId=t.u32(),e.skillOptionData=Vo(t,a),e}function he(t,a){t.u64(a.sourceId),l(t,a.curDirectionYaw),l(t,a.newDirectionYaw),u(t,a.aimTargetPosition),t.bool(a.pitchRotation!==void 0)&&l(t,a.pitchRotation),t.bool(a.aiStateId!==void 0)&&t.u32(a.aiStateId),u(t,a.curPosition),t.bool(a.unk1_m!==void 0)&&t.u32(a.unk1_m),t.u8(a.skillLevel),u(t,a.newPosition),t.u32(a.skillId),Ho(t,a.skillOptionData)}var Ce="SkillStartNotify";function Ke(t,a){let e={};return e.statusEffectData=m(t,a),e.objectId=t.u64(),e.new=t.bool(),e}function We(t,a){p(t,a.statusEffectData),t.u64(a.objectId),t.bool(a.new)}var we="StatusEffectAddNotify";function Me(t,a){let e={};return e.statusEffectIds=t.array(t.u16(),()=>t.u32(),80),e.objectId=t.u64(),e.reason=t.u8(),e}function Be(t,a){t.array(a.statusEffectIds,{maxLen:80,lenType:"u16"},e=>{t.u32(e)}),t.u64(a.objectId),t.u8(a.reason)}var je="StatusEffectRemoveNotify";function Fe(t,a){let e={};return e.effectInstanceId=t.u32(),e.targetId=t.u64(),e.expirationTick=t.u64(),e}function Ze(t,a){t.u32(a.effectInstanceId),t.u64(a.targetId),t.u64(a.expirationTick)}var qe="StatusEffectDurationNotify";function _e(t,a){let e={};return e.objectId=t.u64(),e.effectInstanceId=t.u32(),e.characterId=t.u64(),e.value=t.u32(),e}function Oe(t,a){t.u64(a.objectId),t.u32(a.effectInstanceId),t.u64(a.characterId),t.u32(a.value)}var Ue="StatusEffectSyncDataNotify";function ze(t,a){let e={};return e.step=t.u32(),e.unk2_m=t.bool(),e.triggerId=t.u32(),e}function Ve(t,a){t.u32(a.step),t.bool(a.unk2_m),t.u32(a.triggerId)}var He="TriggerBossBattleStatus";function Ge(t,a){let e={};return e.packetResultCode=t.u32(),e.triggerId=t.u32(),e.unk0_m=t.u32(),e.involvedPCs=t.array(t.u16(),()=>t.u64(),40),e}function Ye(t,a){t.u32(a.packetResultCode),t.u32(a.triggerId),t.u32(a.unk0_m),t.array(a.involvedPCs,{maxLen:40,lenType:"u16"},e=>{t.u64(e)})}var $e="TriggerFinishNotify";function Je(t,a){let e={};return e.triggerId=t.u32(),e.triggerSignalType=t.u32(),e.sourceId=t.u64(),e.involvedPCs=t.array(t.u16(),()=>t.u64(),40),e}function Qe(t,a){t.u32(a.triggerId),t.u32(a.triggerSignalType),t.u64(a.sourceId),t.array(a.involvedPCs,{maxLen:40,lenType:"u16"},e=>{t.u64(e)})}var Xe="TriggerStartNotify";function ta(t,a){let e={};return e.maxHp=n(t,a),e.characterId=t.u64(),e.unk0_m=t.u32(),e.statusEffectDatas=t.array(t.u16(),()=>m(t,a),80),e.position=t.u64(),e.curHp=n(t,a),e}function ea(t,a){r(t,a.maxHp),t.u64(a.characterId),t.u32(a.unk0_m),t.array(a.statusEffectDatas,{maxLen:80,lenType:"u16"},e=>{p(t,e)}),t.u64(a.position),r(t,a.curHp)}var aa="TroopMemberUpdateMinNotify";function oa(t,a){let e={};return e.identityGauge1=t.u32(),e.identityGauge2=t.u32(),e.identityGauge3=t.u32(),e.playerId=t.u64(),e}function ia(t,a){t.u32(a.identityGauge1),t.u32(a.identityGauge2),t.u32(a.identityGauge3),t.u64(a.playerId)}var na="IdentityGaugeChangeNotify";function ra(t,a){let e={};return e.objectId=t.u64(),e}function sa(t,a){t.u64(a.objectId)}var fa="ZoneObjectUnpublishNotify";function Di(t,a){let e={};return e.stackCount=t.u8(),e.target=t.u8(),e.id=t.u32(),e}function ki(t,a){t.u8(a.stackCount),t.u8(a.target),t.u32(a.id)}function ua(t,a){let e={};return e.zoneStatusEffectDataList=t.array(t.u16(),()=>Di(t,a),4),e}function ma(t,a){t.array(a.zoneStatusEffectDataList,{maxLen:4,lenType:"u16"},e=>{ki(t,e)})}var pa="ZoneStatusEffectAddNotify";function ya(t,a){let e={};return e.statusEffectId=t.u32(),e}function ca(t,a){t.u32(a.statusEffectId)}var la="ZoneStatusEffectRemoveNotify";function da(t,a){let e={};return e.skillLevel=t.u8(),e.caster=t.u64(),e.skillId=t.u32(),e}function Na(t,a){t.u8(a.skillLevel),t.u64(a.caster),t.u32(a.skillId)}var ba="SkillCastNotify";function Sa(t,a){let e={};return e.objectId=t.u64(),e.stance=t.u8(),e}function ga(t,a){t.u64(a.objectId),t.u8(a.stance)}var xa="IdentityStanceChangeNotify";function Ea(t,a){let e={};return e.objectId=t.u64(),e.equipItemDataList=t.array(t.u16(),()=>g(t,a),32),e}function Ia(t,a){t.u64(a.objectId),t.array(a.equipItemDataList,{maxLen:32,lenType:"u16"},e=>{x(t,e)})}var Pa="EquipChangeNotify";function va(t,a){let e={};return e.objectId=t.u64(),e.equipLifeToolDataList=t.array(t.u16(),()=>g(t,a),9),e}function Ta(t,a){t.u64(a.objectId),t.array(a.equipLifeToolDataList,{maxLen:9,lenType:"u16"},e=>{x(t,e)})}var Da="EquipLifeToolChangeNotify";function Ri(t,a){let e={};return t.bool()&&(e.serialNumber=t.u64(),e.id=t.u32(),e.level=t.u16(),e.slot=t.u16(),e.durability=t.u32(),e.unk1_6_m=t.u32(),e.flag=t.u32(),e.expireTime=N(t),e.lockUpdateTime=N(t)),e}function Li(t,a){t.bool(a.slot!==void 0)&&(t.u64(a.serialNumber),t.u32(a.id),t.u16(a.level),t.u16(a.slot),t.u32(a.durability),t.u32(a.unk1_6_m),t.u32(a.flag),b(t,a.expireTime),b(t,a.lockUpdateTime))}function ka(t,a){let e={};return e.itemDataList=t.array(t.u16(),()=>Ri(t,a),80),e.storageType=t.u8(),e}function Ra(t,a){t.array([1,20].includes(a.storageType)?a.itemDataList:[],{maxLen:80,lenType:"u16"},e=>{Li(t,e)}),t.u8(a.storageType)}var La="InitItem";function Ai(t,a){let e={};return e.npcId=t.u32(),e.isDead=t.bool(),e}function hi(t,a){t.u32(a.npcId),t.bool(a.isDead)}function Aa(t,a){let e={};return e.raidResult=t.u8(),e.raidId=t.u32(),e.totalTime=t.u64(),e.bossKillDataList=t.array(t.u16(),()=>Ai(t,a),3),e.endTick=t.u64(),e.startTick=t.u64(),e}function ha(t,a){t.u8(a.raidResult),t.u32(a.raidId),t.u64(a.totalTime),t.array(a.bossKillDataList,{maxLen:3,lenType:"u16"},e=>{hi(t,e)}),t.u64(a.endTick),t.u64(a.startTick)}var Ca="RaidBegin";function Ka(t,a){let e={};return e.zoneInstId=t.u64(),e.zoneId=t.u32(),e.loadComplete=t.bool(),e.completeMembers=t.array(t.u16(),()=>t.u64(),40),e.totalMembers=t.array(t.u16(),()=>t.u64(),40),e.firstPCEnterTick=t.u64(),e.zoneLevel=t.u8(),e}function Wa(t,a){t.u64(a.zoneInstId),t.u32(a.zoneId),t.bool(a.loadComplete),t.array(a.completeMembers,{maxLen:40,lenType:"u16"},e=>{t.u64(e)}),t.array(a.totalMembers,{maxLen:40,lenType:"u16"},e=>{t.u64(e)}),t.u64(a.firstPCEnterTick),t.u8(a.zoneLevel)}var wa="ZoneMemberLoadStatusNotify";function Ci(t,a){let e={};return e.position=f(t),e.objectId=t.u64(),e.ownerId=t.u64(),e.skillId=t.u32(),e.skillEffect=t.u32(),e}function Ki(t,a){u(t,a.position),t.u64(a.objectId),t.u64(a.ownerId),t.u32(a.skillId),t.u32(a.skillEffect)}function Ma(t,a){let e={};return e.trapData=Ci(t,a),e}function Ba(t,a){Ki(t,a.trapData)}var ja="NewTrap";function Fa(t,a){let e={};return e.skillId=t.u32(),e.caster=t.u64(),e.newDirectionYaw=c(t),e.cancelReason=t.u8(),e.newPosition=f(t),e}function Za(t,a){t.u32(a.skillId),t.u64(a.caster),l(t,a.newDirectionYaw),t.u8(a.cancelReason),u(t,a.newPosition)}var qa="SkillCancelNotify";function _a(t,a){let e={};return e.players=t.array(t.u8(),()=>{let o={};return o.name=t.string(20),o.stats=t.array(t.u8(),()=>{let i={};return i.id=t.u8(),i.value=t.u32(),i},100),a>=4&&(o.elixirs=t.array(t.u8(),()=>{let i={};return i.slot=t.u8(),i.entries=t.array(t.u8(),()=>{let s={};return s.level=t.u8(),s.id=t.u32(),s}),i},32)),a>=5&&(o.gems=t.array(t.u8(),()=>{let i={};i.id=t.u32(),i.skillId=t.u32(),i.type=t.u8(),i.value=t.u16()})),o},24),e}function Oa(t,a){t.array(a.players,{maxLen:24,lenType:"u8"},e=>{t.string(e.name,20),t.array(e.stats,{maxLen:100,lenType:"u8"},o=>{t.u8(o.id),t.u32(o.value)}),t.array(e.elixirs,{maxLen:32,lenType:"u8"},o=>{t.u8(o.slot),t.array(o.entries,{maxLen:5,lenType:"u8"},i=>{t.u8(i.level),t.u32(i.id)})}),t.array(e.gems,{maxLen:20,lenType:"u8"},o=>{t.u32(o.id),t.u32(o.skillId),t.u8(o.type),t.u16(o.value)})})}var Ua="APP_StatApi";var za=new Map([[101,[q,F,Z]],[0,[z,O,U]],[1,[G,V,H]],[2,[J,Y,$]],[4,[tt,Q,X]],[5,[ot,et,at]],[6,[rt,it,nt]],[7,[ut,st,ft]],[8,[yt,mt,pt]],[9,[dt,ct,lt]],[10,[St,Nt,bt]],[11,[Et,gt,xt]],[12,[Tt,Pt,vt]],[13,[Rt,Dt,kt]],[14,[Ct,At,ht]],[15,[wt,Kt,Wt]],[16,[jt,Mt,Bt]],[17,[qt,Ft,Zt]],[18,[Ut,_t,Ot]],[19,[Ht,zt,Vt]],[20,[$t,Gt,Yt]],[21,[Xt,Jt,Qt]],[22,[ae,te,ee]],[23,[ne,oe,ie]],[24,[fe,re,se]],[25,[pe,ue,me]],[26,[le,ye,ce]],[27,[be,de,Ne]],[28,[xe,Se,ge]],[29,[Pe,Ee,Ie]],[30,[De,ve,Te]],[31,[Le,ke,Re]],[32,[Ce,Ae,he]],[34,[we,Ke,We]],[35,[je,Me,Be]],[36,[qe,Fe,Ze]],[37,[Ue,_e,Oe]],[38,[He,ze,Ve]],[39,[$e,Ge,Ye]],[40,[Xe,Je,Qe]],[41,[aa,ta,ea]],[42,[na,oa,ia]],[43,[fa,ra,sa]],[44,[pa,ua,ma]],[45,[la,ya,ca]],[46,[ba,da,Na]],[47,[xa,Sa,ga]],[48,[Pa,Ea,Ia]],[49,[Da,va,Ta]],[50,[La,ka,Ra]],[52,[Ca,Aa,ha]],[51,[wa,Ka,Wa]],[53,[ja,Ma,Ba]],[54,[qa,Fa,Za]],[6e4,[Ua,_a,Oa]]]);var D=class{time;#e;#t;#a;#o;constructor(...a){if(a.length===5){let[e,o,i,s,y]=a;this.#t=e,this.time=i,this.#e=o,this.#a=s,this.#o=y}else if(a.length===3){let[e,o,i]=a;this.#t=Buffer.alloc(0),this.time=new Date,this.#e=o,this.#a=()=>e,this.#o=i}else throw new Error("[meter-core/logger/parser] - LogEvent<T>: Invalid constructor arguments")}#i;get parsed(){if(!this.#i)try{this.#i=this.#a(new Ja(this.#t))}catch(a){console.error(`[meter-core/logger/parser] - parsed - ${a}`);return}return this.#i}#n;get serialized(){if(!this.#n)try{if(!this.parsed)return;let a=new Qa;a.skip(Ha),this.#o(a,this.parsed);let e=a.value;e.writeUint16LE(e.length,wi),e.writeUint16LE(this.#e,W),e.writeUintLE(+new Date,Va,w),this.#n=a.value}catch(a){console.error(`[meter-core/logger/parser] - serialized - ${a}`);return}return this.#n}},k=6,Wi=2,wi=0,K=2,W=wi+Wi,w=6,Va=W+K,Ha=Wi+K+w;import{createWriteStream as en}from"fs";import{createReadStream as an}from"fs";var M=class extends tn{},Mi=class extends M{#e;#t;constructor(a,e,o){super(),this.#e=e,o&&(this.#t=en(o,{highWaterMark:0}));let i=Buffer.allocUnsafe(k);i.writeUIntLE(5,0,k),this.#t?.write(i),a.on("*",this.handlePkt.bind(this))}handlePkt(a,e,o,i){try{let s=fi.get(e),y=mi.get(e);if(s&&y){let[d]=y,[Ga,B]=s,T=za.get(d);if(T){let[R,on,Fi]=T,Ya=new ui(Buffer.from(a),e,o,!!i,this.#e,B).parsed;if(!Ya)return;let j=new D(Ya,d,Fi);this.emit(R,j),this.emit("*",R,j),this.appendLog(j)}}}catch(s){console.error(s)}}appendLog(a){this.#t&&a.serialized&&this.#t.write(a.serialized)}},Bi=class extends M{readLogByChunk(a){let e=new $a,o=an(a),i=!1,s;o.on("data",y=>{if(s===void 0){if(s=this.readVersion(y),s>5){o.destroy();return}y=y.subarray(k)}e.write(y);let d;for(;d=e.read();)this.readLogChunk(d,s)}).on("end",()=>{i=!0,this.emit("fileEnd","end")}).on("close",()=>{i||this.emit("fileEnd","closed")})}readLogChunk(a,e){try{if(a.length<8)return!1;let o=a.readUIntLE(W,K),i=new Date(a.readUintLE(Va,w)),s=a.subarray(Ha),y=za.get(o);if(y){let[d,Ga,B]=y,T=new D(s,o,new Date(i),R=>Ga(R,e),B);this.emit(d,T),this.emit("*",d,T)}}catch(o){console.error(o)}}readVersion(a){return a.readUintLE(0,k)}};export{xt as a,za as b,D as c,M as d,Mi as e,Bi as f};
